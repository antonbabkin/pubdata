[
  {
    "objectID": "bea_io.html",
    "href": "bea_io.html",
    "title": "Input-Output Tables - Bureau of Economic Analysis",
    "section": "",
    "text": "Overview\n  Tables\n  Variables\n  Examples\n  \n  BEA-NAICS crosswalk\n  GDP by commodity\n  Components of value added by industry\n  Sector Use table in matrix form\n  Inputs to grain farming"
  },
  {
    "objectID": "bea_io.html#bea-naics-crosswalk",
    "href": "bea_io.html#bea-naics-crosswalk",
    "title": "Input-Output Tables - Bureau of Economic Analysis",
    "section": "BEA-NAICS crosswalk",
    "text": "BEA-NAICS crosswalk\n2023 I-O revision, 2017 NAICS revision.\n\n\nCode\npubdata::get(\"bea_io\", \"2023_naics\") %&gt;%\n  summarize(naics = str_c(naics, collapse = \", \"), .by = c(sector, summary, u_summary, detail, title)) %&gt;%\n  datatable(filter = \"top\")"
  },
  {
    "objectID": "bea_io.html#gdp-by-commodity",
    "href": "bea_io.html#gdp-by-commodity",
    "title": "Input-Output Tables - Bureau of Economic Analysis",
    "section": "GDP by commodity",
    "text": "GDP by commodity\nGDP as the sum of final uses: consumption, investment, government spending, net export.\n\\[\nY = C + I + G + X - M\n\\]\nBillions of dollars in 2022.\n\n\nCode\nx &lt;- pubdata::get(\"bea_io\", \"2023_mu_use-bef-pro_sec_2022\")\ncommodity_codes &lt;- x %&gt;%\n  filter(core_matrix) %&gt;%\n  distinct(row_code) %&gt;%\n  pull()\nx %&gt;%\n  mutate(\n    col_name = case_match(\n      col_name,\n      \"Personal consumption expenditures\" ~ \"C\",\n      \"Private fixed investment\" ~ \"I1\",\n      \"Change in private inventories\" ~ \"I2\",\n      \"Exports of goods and services\" ~ \"X\",\n      \"Imports of goods and services\" ~ \"M\",\n      \"Government consumption expenditures and gross investment\" ~ \"G\",\n      \"Total Final Uses (GDP)\" ~ \"Y\"\n    ),\n    value = replace_na(value, 0)\n  ) %&gt;%\n  filter(row_code %in% commodity_codes, !is.na(col_name)) %&gt;%\n  pivot_wider(id_cols = c(row_code, row_name), names_from = col_name) %&gt;%\n  mutate(I = I1 + I2) %&gt;%\n  select(row_code, row_name, Y, C, I, G, X, M) %&gt;%\n  { add_row(., row_code = \"\", row_name = \"TOTAL\", summarize(., across(where(is.numeric), sum)), .before = 1) } %&gt;%\n  mutate(across(where(is.numeric), \\(x) round(x / 1000)))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nrow_code\nrow_name\nY\nC\nI\nG\nX\nM\n\n\n\n\n\nTOTAL\n25744\n17512\n4757\n4447\n2600\n-3571\n\n\n11\nAgriculture, forestry, fishing, and hunting\n78\n123\n-22\n0\n60\n-83\n\n\n21\nMining\n48\n0\n98\n0\n178\n-228\n\n\n22\nUtilities\n359\n359\n0\n0\n5\n-5\n\n\n23\nConstruction\n1878\n0\n1497\n382\n0\n0\n\n\n31G\nManufacturing\n1977\n2413\n1136\n149\n1029\n-2751\n\n\n42\nWholesale trade\n1495\n706\n327\n39\n321\n102\n\n\n44RT\nRetail trade\n2376\n2258\n118\n0\n0\n0\n\n\n48TW\nTransportation and warehousing\n648\n460\n43\n5\n154\n-14\n\n\n51\nInformation\n1109\n702\n316\n40\n72\n-21\n\n\nFIRE\nFinance, insurance, real estate, rental, and leasing\n4396\n3979\n203\n0\n284\n-70\n\n\nPROF\nProfessional and business services\n1942\n349\n1186\n277\n298\n-167\n\n\n6\nEducational services, health care, and social assistance\n3647\n3642\n0\n0\n16\n-12\n\n\n7\nArts, entertainment, recreation, accommodation, and food services\n1567\n1556\n9\n0\n4\n-2\n\n\n81\nOther services, except government\n761\n764\n0\n0\n0\n-4\n\n\nG\nGovernment\n3664\n94\n0\n3570\n1\n0\n\n\nUsed\nScrap, used and secondhand goods\n-49\n127\n-169\n-15\n32\n-24\n\n\nOther\nNoncomparable imports and rest-of-the-world adjustment\n-152\n-19\n15\n0\n146\n-294"
  },
  {
    "objectID": "bea_io.html#components-of-value-added-by-industry",
    "href": "bea_io.html#components-of-value-added-by-industry",
    "title": "Input-Output Tables - Bureau of Economic Analysis",
    "section": "Components of value added by industry",
    "text": "Components of value added by industry\nUse table subtotals satisfy the following accounting identity:\n\\[\n\\text{Total industry output} =\n\\text{Total Intermediate} + \\text{Compensation of employees} + \\text{Gross operating surplus} + \\text{Net taxes}\n\\]\nTable below shows percentage shares of total output by industry in 2022 at the sector level.\n\n\nCode\nx &lt;- pubdata::get(\"bea_io\", \"2023_mu_use-bef-pro_sec_2022\")\nindustry_codes &lt;- x %&gt;%\n  filter(core_matrix) %&gt;%\n  distinct(col_code) %&gt;%\n  pull()\nx %&gt;%\n  filter(\n    row_name %in% c(\n      \"Total Intermediate\", \n      \"Compensation of employees\", \n      \"Gross operating surplus\", \n      \"Taxes on production and imports, less subsidies\", \n      \"Total Industry Output\"),\n    col_code %in% industry_codes\n  ) %&gt;%\n  mutate(\n    pct = round(100 * value / sum(if_else(row_name == \"Total Industry Output\", value, 0)), 1),\n    .by = col_code) %&gt;%\n  filter(row_name != \"Total Industry Output\") %&gt;%\n  pivot_wider(id_cols = c(col_code, col_name), names_from = row_name, values_from = pct) %&gt;%\n  rename(intermediates = \"Total Intermediate\", \n         compensation = \"Compensation of employees\", \n         taxes = \"Taxes on production and imports, less subsidies\",\n         surplus = \"Gross operating surplus\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ncol_code\ncol_name\nintermediates\ncompensation\ntaxes\nsurplus\n\n\n\n\n11\nAgriculture, forestry, fishing, and hunting\n57.2\n10.1\n0.2\n32.5\n\n\n21\nMining\n46.9\n9.0\n7.4\n36.7\n\n\n22\nUtilities\n37.5\n13.7\n10.8\n38.0\n\n\n23\nConstruction\n48.9\n32.7\n0.6\n17.7\n\n\n31G\nManufacturing\n63.2\n17.6\n1.4\n17.9\n\n\n42\nWholesale trade\n44.6\n23.9\n11.7\n19.9\n\n\n44RT\nRetail trade\n40.2\n28.3\n12.3\n19.2\n\n\n48TW\nTransportation and warehousing\n48.8\n28.3\n2.6\n20.3\n\n\n51\nInformation\n43.3\n20.9\n2.8\n32.9\n\n\nFIRE\nFinance, insurance, real estate, rental, and leasing\n35.8\n14.9\n5.1\n44.2\n\n\nPROF\nProfessional and business services\n38.5\n45.9\n1.6\n13.9\n\n\n6\nEducational services, health care, and social assistance\n36.6\n52.6\n1.0\n9.8\n\n\n7\nArts, entertainment, recreation, accommodation, and food services\n44.6\n32.7\n7.0\n15.7\n\n\n81\nOther services, except government\n38.8\n44.2\n3.5\n13.5\n\n\nG\nGovernment\n39.8\n46.5\n-1.2\n14.9"
  },
  {
    "objectID": "bea_io.html#sector-use-table-in-matrix-form",
    "href": "bea_io.html#sector-use-table-in-matrix-form",
    "title": "Input-Output Tables - Bureau of Economic Analysis",
    "section": "Sector Use table in matrix form",
    "text": "Sector Use table in matrix form\nPivot long to wide. Using codes as row and column names, billions of dollars.\n\n\nCode\nx &lt;- pubdata::get(\"bea_io\", \"2023_mu_use-bef-pro_sec_2017\") %&gt;%\n  mutate(\n    value = round(replace_na(value, 0) / 1000),\n    row_code = case_match(\n      row_name,\n      \"Total Intermediate\" ~ \"T005\",\n      \"Total Value Added\" ~ \"T006\",\n      \"Total Industry Output\" ~ \"T008\",\n      .default = row_code\n    ),\n    col_code = case_match(\n      col_name,\n      \"Total Intermediate\" ~ \"T001\",\n      \"Total Final Uses (GDP)\" ~ \"FTOT\",\n      \"Total Commodity Output\" ~ \"TOUT\",\n      .default = col_code\n    )\n  ) %&gt;%\n  pivot_wider(id_cols = row_code, names_from = col_code)\n\nx %&gt;%\n  select(!row_code) %&gt;%\n  as.matrix() %&gt;%\n  `rownames&lt;-`(x$row_code) %&gt;%\n  knitr::kable()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n11\n21\n22\n23\n31G\n42\n44RT\n48TW\n51\nFIRE\nPROF\n6\n7\n81\nG\nT001\nF010\nF020\nF030\nF040\nF050\nF100\nFTOT\nTOUT\n\n\n\n\n11\n110\n0\n0\n1\n255\n1\n2\n0\n0\n0\n2\n0\n9\n0\n6\n387\n82\n0\n-3\n44\n-59\n0\n64\n451\n\n\n21\n1\n40\n12\n13\n320\n0\n0\n0\n1\n0\n2\n1\n2\n1\n29\n423\n0\n100\n-4\n49\n-153\n0\n-8\n415\n\n\n22\n9\n9\n11\n9\n71\n15\n40\n10\n8\n54\n17\n26\n31\n7\n32\n350\n265\n0\n0\n4\n-2\n0\n267\n617\n\n\n23\n2\n5\n7\n0\n21\n3\n8\n6\n3\n128\n3\n5\n5\n3\n94\n295\n0\n1053\n0\n0\n0\n322\n1375\n1670\n\n\n31G\n68\n47\n14\n378\n1838\n103\n59\n115\n70\n70\n164\n203\n131\n58\n371\n3689\n1741\n898\n31\n909\n-1931\n123\n1770\n5458\n\n\n42\n44\n13\n6\n88\n397\n60\n29\n28\n29\n28\n40\n60\n36\n13\n69\n939\n566\n247\n10\n206\n39\n28\n1096\n2035\n\n\n44RT\n1\n1\n3\n78\n18\n1\n7\n12\n0\n7\n5\n1\n9\n6\n0\n148\n1547\n74\n0\n0\n0\n0\n1621\n1769\n\n\n48TW\n13\n11\n19\n26\n165\n105\n67\n153\n16\n51\n65\n26\n15\n6\n74\n812\n316\n27\n-4\n116\n-24\n2\n433\n1245\n\n\n51\n1\n1\n7\n8\n23\n19\n27\n7\n243\n79\n94\n30\n25\n14\n129\n706\n514\n203\n0\n78\n-17\n24\n802\n1509\n\n\nFIRE\n16\n29\n24\n46\n110\n187\n200\n120\n94\n1273\n291\n270\n130\n79\n108\n2977\n3197\n168\n0\n235\n-59\n0\n3540\n6517\n\n\nPROF\n5\n37\n42\n77\n270\n318\n192\n83\n225\n532\n581\n282\n158\n59\n273\n3134\n269\n778\n0\n204\n-131\n195\n1316\n4449\n\n\n6\n0\n0\n0\n0\n0\n2\n3\n0\n0\n0\n1\n41\n2\n2\n21\n73\n2917\n0\n0\n6\n-6\n0\n2917\n2990\n\n\n7\n1\n1\n4\n1\n7\n16\n8\n11\n45\n97\n76\n53\n44\n5\n18\n385\n1192\n5\n0\n4\n-1\n0\n1201\n1586\n\n\n81\n0\n1\n2\n6\n14\n18\n12\n12\n7\n51\n34\n22\n13\n6\n40\n239\n613\n0\n0\n0\n-5\n0\n609\n848\n\n\nG\n0\n0\n1\n0\n5\n23\n9\n8\n2\n11\n9\n7\n9\n2\n12\n98\n79\n0\n0\n1\n0\n2716\n2796\n2894\n\n\nUsed\n0\n1\n6\n3\n31\n0\n0\n6\n0\n0\n0\n1\n0\n10\n0\n58\n81\n-126\n4\n21\n-14\n-13\n-47\n11\n\n\nOther\n1\n1\n2\n2\n21\n8\n5\n19\n9\n42\n10\n1\n3\n5\n15\n142\n-91\n8\n0\n204\n-260\n0\n-139\n3\n\n\nT005\n272\n195\n160\n738\n3567\n878\n668\n591\n753\n2422\n1394\n1027\n622\n276\n1292\n14856\n0\n0\n0\n0\n0\n0\n0\n0\n\n\nV001\n56\n77\n82\n520\n1053\n533\n607\n352\n349\n936\n1755\n1380\n494\n305\n1935\n10435\n0\n0\n0\n0\n0\n0\n0\n0\n\n\nV002\n1\n39\n62\n10\n88\n223\n232\n39\n59\n340\n61\n41\n109\n24\n-25\n1304\n0\n0\n0\n0\n0\n0\n0\n0\n\n\nV003\n120\n151\n170\n310\n968\n420\n340\n244\n603\n2756\n618\n296\n227\n104\n546\n7873\n0\n0\n0\n0\n0\n0\n0\n0\n\n\nT006\n177\n267\n314\n840\n2110\n1176\n1179\n635\n1010\n4033\n2434\n1717\n831\n433\n2456\n0\n0\n0\n0\n0\n0\n0\n19612\n0\n\n\nT008\n449\n463\n474\n1578\n5677\n2054\n1847\n1227\n1763\n6455\n3828\n2744\n1453\n709\n3748\n0\n13291\n3435\n33\n2083\n-2626\n3397\n0\n34468"
  },
  {
    "objectID": "bea_io.html#inputs-to-grain-farming",
    "href": "bea_io.html#inputs-to-grain-farming",
    "title": "Input-Output Tables - Bureau of Economic Analysis",
    "section": "Inputs to grain farming",
    "text": "Inputs to grain farming\n2017 dollar value of top 10 detail level commodities used is inputs to Grain farming industry.\n\n\nCode\npubdata::get(\"bea_io\", \"2023_mu_use-bef-pro_det_2017\") %&gt;%\n  filter(col_name == \"Grain farming\", core_matrix) %&gt;%\n  arrange(desc(value)) %&gt;%\n  head(10) %&gt;%\n  select(row_code, row_name, value)\n\n\n\n\n\n\n\n\n\n\n\nrow_code\nrow_name\nvalue\n\n\n\n\n115000\nSupport activities for agriculture and forestry\n8007\n\n\n1111B0\nGrain farming\n7694\n\n\n424A00\nOther nondurable goods merchant wholesalers\n6843\n\n\n325320\nPesticide and other agricultural chemical manufacturing\n4234\n\n\n325310\nFertilizer manufacturing\n3608\n\n\n324110\nPetroleum refineries\n2202\n\n\n531ORE\nOther real estate\n2115\n\n\n221300\nWater, sewage and other systems\n1847\n\n\n484000\nTruck transportation\n1206\n\n\n482000\nRail transportation\n807"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "pubdata: Interface for public use datasets",
    "section": "",
    "text": "The general package interface for public data (“pubdata”) provide a list of operation that enables exploration and interaction with the data collections, specifically using ls(), meta(),and get()."
  },
  {
    "objectID": "index.html#ls-list-available-data",
    "href": "index.html#ls-list-available-data",
    "title": "pubdata: Interface for public use datasets",
    "section": "ls(): list available data",
    "text": "ls(): list available data\nPrint a list of all available data collections.\n\npubdata::ls()\n\n[1] \"bds\"       \"bea_fa\"    \"bea_io\"    \"bea_reg\"   \"ers_rural\" \"naics\"    \n[7] \"qcew\"     \n\n\ndetail: print the data collections with additional details for each data collection (description, cache file, etc).\n\npubdata::ls(detail = TRUE)\n\n\n  \n\n\n\ncollection: print the available keys in a specific collection. For example, keys in the \"naics\" collection:\n\npubdata::ls(collection = \"naics\")\n\n[1] \"raw_2007_code\" \"raw_2012_code\" \"raw_2017_code\" \"raw_2022_code\"\n[5] \"2007_code\"     \"2012_code\"     \"2017_code\"     \"2022_code\"    \n\n# obtain the keys with additional details\npubdata::ls(collection = \"naics\", detail = TRUE)\n\n\n  \n\n\n\npattern: print all the keys that match specific regex pattern within the data collection. For example, to print the keys with regex pattern \"2022\" in the \"naics\" collection:\n\npubdata::ls(collection = \"naics\", pattern = \"2022\")\n\n[1] \"raw_2022_code\" \"2022_code\"    \n\n# print the keys with details\npubdata::ls(collection = \"naics\", pattern = \"2022\", detail = TRUE)"
  },
  {
    "objectID": "index.html#meta-show-collection-or-dataset-metadata",
    "href": "index.html#meta-show-collection-or-dataset-metadata",
    "title": "pubdata: Interface for public use datasets",
    "section": "meta(): show collection or dataset metadata",
    "text": "meta(): show collection or dataset metadata\nObtain the metadata of a specific collection or all keys within the collection (argument collection must be included).\n\ncollection: for data collections, meta() will provide information about:\n\n“desc”: description\n“urls”: a list of link to the source of the data collection\n“data_keys”: the number of keys within the data collection\n\n\nFor example, to print the metadata of the \"ers_rural\" collection:\n\npubdata::meta(\"ers_rural\", print = TRUE)\n\ncollection: ers_rural\ndesc: Rurality classifications from the USDA Economic Research Service (ERS)\nurls:\n  Home: https://www.ers.usda.gov/topics/rural-economy-population/rural-classifications/\n  Rural-Urban Continuum Codes: https://www.ers.usda.gov/data-products/rural-urban-continuum-codes/\n  Urban Influence Codes: https://www.ers.usda.gov/data-products/urban-influence-codes/\n  Rural-Urban Commuting Area Codes: https://www.ers.usda.gov/data-products/rural-urban-commuting-area-codes/\n  Frontier and Remote Area Codes: https://www.ers.usda.gov/data-products/frontier-and-remote-area-codes/\ndata_keys: 38\n\n\n\nkey: for a specific dataset within the data collections, meta() will provide information including:\n\n“mask”: naming pattern\n“desc”: description\n“type”: data format (usually “table”)\n“path”: internal path of the dataset\n“depends”: dataset dependencies\n“schema”: the description for variables in the dataset\n“keys”: regex pattern used to obtain the dataset\n\n\nFor example, to print the metadata of the \"ruc_2023\" dataset within the \"ers_rural\" collection:\n\npubdata::meta(collection = \"ers_rural\", key = \"ruc_2023\", print = TRUE)\n\ndesc: 2023 Rural-Urban Continuum Codes\ntype: table\npath: proc/ruc_2023.pq\ndepends: raw_ruc_2023\nschema:\n  fips:\n    desc: State+county FIPS code\n    orig: FIPS\n    type: character\n  state:\n    desc: State or territory abbreviation\n    orig: State\n    type: character\n  county_name:\n    desc: County or county-equivalent name\n    orig: County_Name\n    type: character\n  population_2020:\n    desc: Total population 2020\n    orig: Population_2020\n    type: integer\n  ruc_code_2023:\n    desc: 2023 Rural-Urban Continuum Code\n    orig: RUCC_2023\n    type: character\n  ruc_desc_2023:\n    desc: Description for 2023 codes\n    orig: Description\n    type: character"
  },
  {
    "objectID": "index.html#get-retrieve-a-dataset",
    "href": "index.html#get-retrieve-a-dataset",
    "title": "pubdata: Interface for public use datasets",
    "section": "get(): retrieve a dataset",
    "text": "get(): retrieve a dataset\nDownload and read the dataset in specific data collection (argumentscollection and key must be included).\nFor example, to download and read the \"ruc_2023\" dataset in the \"ers_rural\" collection:\npubdata::get(collection = \"ers_rural\", key = \"ruc_2023\")\nHere would be the first 10 rows of the \"ruc_2023\" dataset:\n\npubdata::get(collection = \"ers_rural\", key = \"ruc_2023\") |&gt;\n  head(10)"
  }
]