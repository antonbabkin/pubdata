[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Public data",
    "section": "",
    "text": "Initialization\nRun code in this section when you start working with the project. It will create symbolic links necessary for file discovery within project directory structure. If project is used as a library, importing code must call the init() function.\nRun initialization in the notebook.\n\ninit()\n\nInitializing project \"pubdata\" and submodule \"reseng\"...\n  Project \"pubdata\" root directory: \"/Users/anton/work/pubdata\"\n  symlink: \"nbs/pubdata\" -> \"pubdata\"\n  symlink: \"pubdata/reseng\" -> \"submodules/reseng/reseng\"\nInitializing project \"reseng\"...\n  Project \"reseng\" root directory: \"/Users/anton/work/pubdata/submodules/reseng\"\n  symlink: \"nbs/reseng\" -> \"reseng\"\nInitialization of \"reseng\" finished.\n\nInitialization of \"pubdata\" finished."
  },
  {
    "objectID": "naics.html",
    "href": "naics.html",
    "title": "NAICS",
    "section": "",
    "text": "Website\nThe North American Industry Classification System (NAICS) is the standard used by Federal statistical agencies in classifying business establishments for the purpose of collecting, analyzing, and publishing statistical data related to the U.S. business economy. NAICS was developed under the auspices of the Office of Management and Budget (OMB), and adopted in 1997 to replace the Standard Industrial Classification (SIC) system. It was developed jointly by the U.S. Economic Classification Policy Committee (ECPC), Statistics Canada, and Mexico’s Instituto Nacional de Estadistica y Geografia, to allow for a high level of comparability in business statistics among the North American countries.\nThe structure of NAICS is hierarchical. The first two digits of the structure designate the 20 NAICS sectors that represent general categories of economic activities. NAICS uses a six-digit coding system to identify industries and their placement in this hierarchical structure of the classification system. The first two digits of the code designate the sector, the third digit designates the subsector, the fourth digit designates the industry group, the fifth digit designates the NAICS industry, and the sixth digit designates the national industry. On the highest 2-digit level there are 20 sectors. Classification is comparable between the USA, Canada and Mexico up to a 5-digit level, with some exceptions. A zero as the sixth digit generally indicates that the NAICS industry and the U.S. industry are the same.\n\n\n\n\n\nDigits\nLevel\n\n\n\n\n2\nsector\n\n\n3\nsubsector\n\n\n4\nindustry group\n\n\n5\nNAICS industry\n\n\n6\nnational industry\n\n\n\nClassification is revised every five years and is currently available for 1997, 2002, 2007, 2012, 2017 and 2022."
  },
  {
    "objectID": "naics.html#summary",
    "href": "naics.html#summary",
    "title": "NAICS",
    "section": "Summary",
    "text": "Summary\nTables below summarize types of links between consequtive years in NAICS concordances. The first table shows forward concordances, i.e. from year t to t+5. The second table show backward concordances, i.e. from year t to year t-5.\n\n1-to-1 same: industry and code did not change between years, this is the most common case.\n1-to-1 diff: industry did not change, but it’s numerical code changes.\nclean split: industry was split into multiple, but all parts only came for the one source industry.\nmessy split: industry was split, but some parts were joined from other industries.\njoin: industry was joined and became a part of another industry.\n\n\n\n\n\n\n\n  \n    \n      \n      1997->2002\n      2002->2007\n      2007->2012\n      2012->2017\n      2017->2022\n    \n  \n  \n    \n      total in \"from\"\n      1169\n      1179\n      1175\n      1065\n      1057\n    \n    \n      1-to-1 same\n      1043\n      1140\n      976\n      1037\n      916\n    \n    \n      1-to-1 diff\n      20\n      2\n      10\n      8\n      12\n    \n    \n      clean split\n      3\n      2\n      1\n      0\n      1\n    \n    \n      messy split\n      95\n      11\n      5\n      4\n      8\n    \n    \n      join\n      8\n      24\n      183\n      16\n      120\n    \n  \n\n\n\n\n\n\n\n\n  \n    \n      \n      2002->1997\n      2007->2002\n      2012->2007\n      2017->2012\n      2022->2017\n    \n  \n  \n    \n      total in \"from\"\n      1179\n      1175\n      1065\n      1057\n      1012\n    \n    \n      1-to-1 same\n      1043\n      1140\n      976\n      1037\n      916\n    \n    \n      1-to-1 diff\n      20\n      2\n      10\n      8\n      12\n    \n    \n      clean split\n      0\n      2\n      67\n      5\n      26\n    \n    \n      messy split\n      22\n      20\n      5\n      4\n      53\n    \n    \n      join\n      94\n      11\n      7\n      3\n      5"
  },
  {
    "objectID": "naics.html#examples-1",
    "href": "naics.html#examples-1",
    "title": "NAICS",
    "section": "Examples",
    "text": "Examples\n\n1-to-1 links and clean splits\n\ndiagramtable\n\n\n\n\nCode\nd = get_concordance_df('naics', 2017, 'naics', 2022)\nd = pd.concat([\n    d.query('NAICS_2017 == \"115111\"'),\n    d.query('NAICS_2017 == \"515112\"'),\n    d.query('NAICS_2017 == \"325314\"')\n])\nviz_concordance(d[['NAICS_2017', 'NAICS_2022', 'FLAG_2017_TO_2022']].values, 2017, 2022)\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n    \n      \n      NAICS_2017\n      TITLE_2017\n      NAICS_2022\n      TITLE_2022\n      DUP_2017\n      DUP_2022\n      FLAG_2017_TO_2022\n    \n  \n  \n    \n      56\n      115111\n      Cotton Ginning\n      115111\n      Cotton Ginning\n      False\n      False\n      1-to-1 same\n    \n    \n      792\n      515112\n      Radio Stations\n      516110\n      Radio Broadcasting Stations\n      False\n      False\n      1-to-1 diff\n    \n    \n      257\n      325314\n      Fertilizer (Mixing Only) Manufacturing - except compost manufacturing\n      325314\n      Fertilizer (Mixing Only) Manufacturing\n      True\n      False\n      clean split\n    \n    \n      258\n      325314\n      Fertilizer (Mixing Only) Manufacturing - compost manufacturing\n      325315\n      Compost Manufacturing\n      True\n      False\n      clean split\n    \n  \n\n\n\n\n\n\n\n\n\nClean joins\nFrom 2012 to 2017 three industries joined into one. However, not every join is clean. The easiest way to identify a clean join from year t0 to t1 is to look for a clean split from year t1 to t0.\n\ndiagram 2012->2017table 2012->2017diagram 2017->2012table 2017->2012\n\n\n\n\nCode\nd = get_concordance_df('naics', 2012, 'naics', 2017)\nd = find_concordance_group(d, 'NAICS_2012', 'NAICS_2017', ['454111'])\nviz_concordance(d[['NAICS_2012', 'NAICS_2017', 'FLAG_2012_TO_2017']].values, 2012, 2017)\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n    \n      \n      NAICS_2012\n      TITLE_2012\n      NAICS_2017\n      TITLE_2017\n      DUP_2012\n      DUP_2017\n      FLAG_2012_TO_2017\n    \n  \n  \n    \n      638\n      454111\n      Electronic Shopping\n      454110\n      Electronic Shopping and Mail-Order Houses\n      False\n      True\n      join\n    \n    \n      639\n      454112\n      Electronic Auctions\n      454110\n      Electronic Shopping and Mail-Order Houses\n      False\n      True\n      join\n    \n    \n      640\n      454113\n      Mail-Order Houses\n      454110\n      Electronic Shopping and Mail-Order Houses\n      False\n      True\n      join\n    \n  \n\n\n\n\n\n\n\n\nCode\nd = get_concordance_df('naics', 2017, 'naics', 2012)\nd = find_concordance_group(d, 'NAICS_2017', 'NAICS_2012', ['454110'])\nviz_concordance(d[['NAICS_2017', 'NAICS_2012', 'FLAG_2017_TO_2012']].values, 2017, 2012)\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n    \n      \n      NAICS_2017\n      TITLE_2017\n      NAICS_2012\n      TITLE_2012\n      DUP_2017\n      DUP_2012\n      FLAG_2017_TO_2012\n    \n  \n  \n    \n      638\n      454110\n      Electronic Shopping and Mail-Order Houses\n      454111\n      Electronic Shopping\n      True\n      False\n      clean split\n    \n    \n      639\n      454110\n      Electronic Shopping and Mail-Order Houses\n      454112\n      Electronic Auctions\n      True\n      False\n      clean split\n    \n    \n      640\n      454110\n      Electronic Shopping and Mail-Order Houses\n      454113\n      Mail-Order Houses\n      True\n      False\n      clean split\n    \n  \n\n\n\n\n\n\n\n\n\nMessy splits and joins\nBy construction, messy split links will always come with joins. From 2017 to 2022, three industries (“212111: Bituminous Coal and Lignite Surface Mining”, “212112: Bituminous Coal Underground Mining” and “212113: Anthracite Mining”) were re-classified into two (“212114: Surface Coal Mining” and “212115: Underground Coal Mining”). This creates a problem, for example, when one wants to identify anthracite mining industry under 2022 NAICS, because the two parts of that industry (surface and underground mining) were combined with other types of coal mining.\n\ndiagramtable\n\n\n\n\nCode\nd = get_concordance_df('naics', 2017, 'naics', 2022)\nd = find_concordance_group(d, 'NAICS_2017', 'NAICS_2022', ['212111'])\nviz_concordance(d[['NAICS_2017', 'NAICS_2022', 'FLAG_2017_TO_2022']].values, 2017, 2022)\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n    \n      \n      NAICS_2017\n      TITLE_2017\n      NAICS_2022\n      TITLE_2022\n      DUP_2017\n      DUP_2022\n      FLAG_2017_TO_2022\n    \n  \n  \n    \n      66\n      212111\n      Bituminous Coal and Lignite Surface Mining\n      212114\n      Surface Coal Mining\n      False\n      True\n      join\n    \n    \n      67\n      212112\n      Bituminous Coal Underground Mining\n      212115\n      Underground Coal Mining\n      False\n      True\n      join\n    \n    \n      68\n      212113\n      Anthracite Mining - anthracite surface mining\n      212114\n      Surface Coal Mining\n      True\n      True\n      messy split\n    \n    \n      69\n      212113\n      Anthracite Mining - anthracite underground mining\n      212115\n      Underground Coal Mining\n      True\n      True\n      messy split\n    \n  \n\n\n\n\n\n\n\n\n\nAll splits and joins\nEvery link from 2012 to 2017 concordance that is not 1-to-1.\n\n\n\n\n\n\ndiagram"
  },
  {
    "objectID": "geography.html",
    "href": "geography.html",
    "title": "Geographic gazetteer",
    "section": "",
    "text": "Describe, retrieve and prepare dataframes with geographic boundaries of various geographic units of the USA."
  },
  {
    "objectID": "geography.html#shapefile-format",
    "href": "geography.html#shapefile-format",
    "title": "Geographic gazetteer",
    "section": "Shapefile format",
    "text": "Shapefile format\nWikipedia\nCensus Bureau shapefiles come as zipped folders and can be read directly with geopandas.\n\nXML metadata\nMost zipped shapefile folders contain XML documents with metadata. Helper functions here parse these files for inspection. In later years files ending with .iso.xml adhere to ISO standards and can be more easily parsed for feature descriptions."
  },
  {
    "objectID": "geography.html#scale",
    "href": "geography.html#scale",
    "title": "Geographic gazetteer",
    "section": "Scale",
    "text": "Scale\nShapefiles are available in different scale. TIGER is the most precise, then follows 1:500,000, then 1:5,000,000, and 1:20,000,000 is the lowest resolution.\nShapefile revisions change from year to year. Between year differences are clearly visible in all scales except TIGER.\nTable below compares boundaries of Tolland County, Connecticut, taken from shapefiles in different years and scales. “Length” column is is boundary length in shape units (degrees), and “points” is the total number of points in the polygon.\n\n\n\n\n\n\n  \n    \n      \n      length\n      points\n    \n    \n      scale\n      \n      \n    \n  \n  \n    \n      tiger 2010\n      1.877432\n      2152\n    \n    \n      tiger 2020\n      1.877094\n      2097\n    \n    \n      500k 2010\n      1.852025\n      201\n    \n    \n      500k 2020\n      1.854092\n      236\n    \n    \n      5m 2010\n      1.767873\n      50\n    \n    \n      20m 2010\n      1.623553\n      27\n    \n  \n\n\n\n\nMap below visualizes boundary differences.\n\n\n\nMake this Notebook Trusted to load map: File -> Trust Notebook"
  },
  {
    "objectID": "geography.html#changes-over-time",
    "href": "geography.html#changes-over-time",
    "title": "Geographic gazetteer",
    "section": "Changes over time",
    "text": "Changes over time\nMajor changes to tract codes and shapes change after decennial censuses, with smaller changes in between years.\nThe first four digits of the tract code are “permanent.” When tracks get large (+8000 residents), tracts are split and 2 digit tag is used (same with the split of splits):\n\n\n\n1990\n2000\n2010\n\n\n\n\n1000\n1000.01\n1000.03\n\n\n1000\n1000.01\n1000.04\n\n\n1000\n1000.02\n1000.05\n\n\n1000\n1000.02\n1000.06\n\n\n\nThe naming convention for merges (population falls below 1,200) and boundary revisions are less clear-cut.\nWhen changes (splits, merges, redefinitions) occur, the relationship of new tracts to old tracts is crosswalked.\nThere is a master file, as well as two files that provided the identifiers of tracts that were “substantially changed” between decennials. The two files of significantly changed census tracts consist only of a list of census tracts that exhibited a change of 2.5-percent or greater. Tract relationships may be one-to-one, many-to-one, one-to-many, or many-to-many.\nRelationship files are currently available for 2010 (relative to 2000) and 2000 (relative to 1990).\n\n2010: data, metadata.\n2000: data, metadata.\n\n\nSplit\nAll tracts in \\(y_1\\) are a partition of a single tract in \\(y_0\\).\n\n\nJoin\nAll tracts in \\(y_0\\) are a partition of a single tract in \\(y_1\\).\n\n\nOther reshape\nArbitrary change in boundaries between two or more adjacent tracts. May include multiple splits, joins and boundary shifts."
  },
  {
    "objectID": "geography_cbsa.html",
    "href": "geography_cbsa.html",
    "title": "Core based statistical area",
    "section": "",
    "text": "Census page | About | Glossary | Delineation tables - recent, historical\nThe United States Office of Management and Budget (OMB) delineates metropolitan and micropolitan statistical areas according to published standards that are applied to Census Bureau data. The general concept of a metropolitan or micropolitan statistical area is that of a core area containing a substantial population nucleus, together with adjacent communities having a high degree of economic and social integration with that core."
  },
  {
    "objectID": "geography_cbsa.html#examples",
    "href": "geography_cbsa.html#examples",
    "title": "Core based statistical area",
    "section": "Examples",
    "text": "Examples\nFrom 2020 CBSA delineation.\nCombined statistical area (CSA) “Madison-Janesville-Beloit, WI” consists of three core based statistical areas (CBSAs): two metropolitan statistical areas (“Madison, WI” and “Janesville-Beloit, WI”) and one micropolitan statistical area (“Baraboo, WI”). No divisions exist within CBSAs, because neither CBSA has core of greater than 2.5 million people. “Madison, WI” metro area consists of the central Dane county and three adjacent outlying counties - Columbia, Green and Iowa.\n\n\nCode\ndf = get_cbsa_delin_df(2020)\ndf.query('CSA_CODE == \"357\"')\\\n[['CSA_TITLE', 'CSA_CODE', 'CBSA_TITLE', 'CBSA_CODE', 'METRO_MICRO', 'STATE', 'COUNTY', 'STATE_CODE', 'COUNTY_CODE', 'CENTRAL_OUTLYING']]\n\n\n\n\n\n\n  \n    \n      \n      CSA_TITLE\n      CSA_CODE\n      CBSA_TITLE\n      CBSA_CODE\n      METRO_MICRO\n      STATE\n      COUNTY\n      STATE_CODE\n      COUNTY_CODE\n      CENTRAL_OUTLYING\n    \n  \n  \n    \n      151\n      Madison-Janesville-Beloit, WI\n      357\n      Baraboo, WI\n      12660\n      micro\n      Wisconsin\n      Sauk County\n      55\n      111\n      central\n    \n    \n      837\n      Madison-Janesville-Beloit, WI\n      357\n      Janesville-Beloit, WI\n      27500\n      metro\n      Wisconsin\n      Rock County\n      55\n      105\n      central\n    \n    \n      1028\n      Madison-Janesville-Beloit, WI\n      357\n      Madison, WI\n      31540\n      metro\n      Wisconsin\n      Columbia County\n      55\n      021\n      outlying\n    \n    \n      1029\n      Madison-Janesville-Beloit, WI\n      357\n      Madison, WI\n      31540\n      metro\n      Wisconsin\n      Dane County\n      55\n      025\n      central\n    \n    \n      1030\n      Madison-Janesville-Beloit, WI\n      357\n      Madison, WI\n      31540\n      metro\n      Wisconsin\n      Green County\n      55\n      045\n      outlying\n    \n    \n      1031\n      Madison-Janesville-Beloit, WI\n      357\n      Madison, WI\n      31540\n      metro\n      Wisconsin\n      Iowa County\n      55\n      049\n      outlying\n    \n  \n\n\n\n\nAll CBSAs that have divisions.\n\n\nCode\ndf = get_cbsa_delin_df(2020)\nd = df.query('DIVISION_CODE.notna()')[['CBSA_TITLE', 'CBSA_CODE', 'DIVISION_CODE']]\npd.concat([\n    d.groupby(['CBSA_TITLE', 'CBSA_CODE']).size(),\n    d.drop_duplicates().groupby(['CBSA_TITLE', 'CBSA_CODE']).size()\n], axis=1).reset_index().rename(columns={0: 'counties', 1: 'divisions'})\n\n\n\n\n\n\n  \n    \n      \n      CBSA_TITLE\n      CBSA_CODE\n      counties\n      divisions\n    \n  \n  \n    \n      0\n      Boston-Cambridge-Newton, MA-NH\n      14460\n      7\n      3\n    \n    \n      1\n      Chicago-Naperville-Elgin, IL-IN-WI\n      16980\n      14\n      4\n    \n    \n      2\n      Dallas-Fort Worth-Arlington, TX\n      19100\n      11\n      2\n    \n    \n      3\n      Detroit-Warren-Dearborn, MI\n      19820\n      6\n      2\n    \n    \n      4\n      Los Angeles-Long Beach-Anaheim, CA\n      31080\n      2\n      2\n    \n    \n      5\n      Miami-Fort Lauderdale-Pompano Beach, FL\n      33100\n      3\n      3\n    \n    \n      6\n      New York-Newark-Jersey City, NY-NJ-PA\n      35620\n      23\n      4\n    \n    \n      7\n      Philadelphia-Camden-Wilmington, PA-NJ-DE-MD\n      37980\n      11\n      4\n    \n    \n      8\n      San Francisco-Oakland-Berkeley, CA\n      41860\n      5\n      3\n    \n    \n      9\n      Seattle-Tacoma-Bellevue, WA\n      42660\n      3\n      2\n    \n    \n      10\n      Washington-Arlington-Alexandria, DC-VA-MD-WV\n      47900\n      25\n      2"
  },
  {
    "objectID": "agcensus.html",
    "href": "agcensus.html",
    "title": "NASS - Census of Agriculture",
    "section": "",
    "text": "The Census of Agriculture is a complete count of U.S. farms and ranches and the people who operate them. Census is conducted USDA NASS (National Agricultural Statistics Service) every 5 years, and the most recently available is 2017.\nAg Census homepage\n\nSource data\nCensus tabulations are available in PDF format for 2017 and all previous years.\nQuickStats provides browser interface and also API or FTP for programmatic or bulk download of 2002, 2007, 2012 and 2017 data.\n\n\nSchema\n\n\n\n\n\n\nlist of dataset fields\n\n\n\n\n\n\n\nCode\nfor f in get_schema():\n    print('----')\n    print(f.name)\n    print(f.metadata[b'desc'].decode())\n\n\n----\nSOURCE_DESC\nSource of data (CENSUS or SURVEY). Census program includes the Census  of Ag as well as follow up projects. Survey program includes national, state,  and county surveys.\n----\nSECTOR_DESC\nFive high  level, broad categories useful to narrow down choices (Crops, Animals & Products, Economics,  Demographics, and Environmental).\n----\nGROUP_DESC\nSubsets within sector (e.g., under sector = Crops, the groups are Field  Crops, Fruit & Tree Nuts, Horticulture, and Vegetables).\n----\nCOMMODITY_DESC\nThe primary subject of interest (e.g., CORN, CATTLE, LABOR, TRACTORS,  OPERATORS).\n----\nCLASS_DESC\nGenerally a physical attribute (e.g., variety, size, color, gender)  of the commodity.\n----\nPRODN_PRACTICE_DESC\nA method of production or action taken on the commodity (e.g., IRRIGATED,  ORGANIC, ON FEED).\n----\nUTIL_PRACTICE_DESC\nUtilizations (e.g., GRAIN, FROZEN, SLAUGHTER) or marketing channels  (e.g., FRESH MARKET, PROCESSING, RETAIL).\n----\nSTATISTICCAT_DESC\nThe aspect of a commodity being measured (e.g., AREA HARVESTED, PRICE  RECEIVED, INVENTORY, SALES).\n----\nUNIT_DESC\nThe unit associated with the statistic category (e.g., ACRES, $ / LB,  HEAD, $, OPERATIONS).\n----\nSHORT_DESC\nA concatenation of six columns: commodity_desc, class_desc,  prodn_practice_desc, util_practice_desc, statisticcat_desc, and unit_desc.\n----\nDOMAIN_DESC\nGenerally another characteristic of operations that produce a  particular commodity (e.g., ECONOMIC CLASS, AREA OPERATED, NAICS  CLASSIFICATION, SALES). For chemical usage data, the domain describes the  type of chemical applied to the commodity. The domain = TOTAL will have no  further breakouts; i.e., the data value pertains completely to the  short_desc.\n----\nDOMAINCAT_DESC\nCategories or partitions within a domain (e.g., under domain = Sales, domain categories include  $1,000 TO $9,999, $10,000 TO $19,999, etc).\n----\nAGG_LEVEL_DESC\nAggregation level or geographic granularity of the data (e.g., State, Ag District, County, Region, Zip Code).\n----\nSTATE_ANSI\nAmerican National Standards Institute (ANSI) standard 2-digit state  codes.\n----\nSTATE_FIPS_CODE\nNASS 2-digit state codes; include 99 and 98 for US TOTAL and OTHER  STATES, respectively; otherwise match ANSI codes.\n----\nSTATE_ALPHA\nState abbreviation, 2-character alpha code.\n----\nSTATE_NAME\nState full name.\n----\nASD_CODE\nNASS defined county groups, unique within a state, 2-digit ag  statistics district code.\n----\nASD_DESC\nAg statistics district name.\n----\nCOUNTY_ANSI\nANSI standard 3-digit county codes.\n----\nCOUNTY_CODE\nNASS 3-digit county codes; includes 998 for OTHER (COMBINED) COUNTIES  and Alaska county codes; otherwise match ANSI codes.\n----\nCOUNTY_NAME\nCounty name.\n----\nREGION_DESC\nNASS defined geographic entities not readily defined by other  standard geographic levels. A region can be a less than a state (Sub-State) or a group of states (Multi-State), and may be specific to  a commodity.\n----\nZIP_5\nUS Postal Service 5-digit zip code.\n----\nWATERSHED_CODE\nUS Geological Survey (USGS) 8-digit Hydrologic Unit Code (HUC) for  watersheds.\n----\nWATERSHED_DESC\nName assigned to the HUC.\n----\nCONGR_DISTRICT_CODE\nUS Congressional District 2-digit code.\n----\nCOUNTRY_CODE\nUS Census Bureau, Foreign Trade Division 4-digit country code, as of  April, 2007.\n----\nCOUNTRY_NAME\nCountry name.\n----\nLOCATION_DESC\nFull description for the location dimension.\n----\nYEAR\nThe numeric year of the data.\n----\nFREQ_DESC\nLength of time covered (Annual,  Season, Monthly, Weekly, Point in Time). Monthly often covers more than one month. Point in Time is as of a particular  day.\n----\nBEGIN_CODE\nIf applicable, a 2-digit code corresponding to the beginning of the  reference period (e.g., for freq_desc = Monthly,  begin_code ranges from 01 (January) to 12 (December)).\n----\nEND_CODE\nIf applicable, a 2-digit code corresponding to the end of the  reference period (e.g., the reference period of Jan thru Mar will have begin_code = 01 and end_code = 03).\n----\nREFERENCE_PERIOD_DESC\nThe specific time frame, within a freq_desc.\n----\nWEEK_ENDING\nWeek ending date, used when freq_desc = Weekly.\n----\nLOAD_TIME\nDate and time indicating when record was inserted into Quick Stats  database.\n----\nVALUE\nPublished data value or suppression reason code.\n----\nVALUE_F\nVALUE flag: NUM, (D) or (Z)\n----\nCV_%\nCoefficient of variation. Available for the 2012 Census of Agriculture only. County-level CVs are generalized.\n----\nCV_%_F\nCV_% flag: NUM, (H), (D) or (L)\n\n\n\n\n\n\n\nLoad dataset\nUse get_df() function to load dataset as pandas dataframe. filters argument should be used to create queries using list of filters formatted as documented for pyarrow filters here.\n\n\nExample: hired and contract labor\nThis example shows how usage of contract and hired labor, measured as percentage of farm expenses, changed over time in California and Wisconsin.\n\n\nCode\ndf = get_df(years=[2002, 2007, 2012, 2017], cols=['YEAR', 'STATE_NAME', 'SHORT_DESC',  'VALUE'],\n            filters=[('DOMAIN_DESC', '==', 'TOTAL'),\n                     ('SHORT_DESC', 'in', [\n                         'LABOR, HIRED - EXPENSE, MEASURED IN PCT OF OPERATING EXPENSES', \n                         'LABOR, CONTRACT - EXPENSE, MEASURED IN PCT OF OPERATING EXPENSES']),\n                     ('STATE_FIPS_CODE', 'in', ['06', '55'])])\ndf['LABOR_TYPE'] = df['SHORT_DESC'].str.split(expand=True)[1]\ndf.set_index(['YEAR', 'STATE_NAME', 'LABOR_TYPE'])['VALUE'].unstack(['STATE_NAME', 'LABOR_TYPE'])\n\n\n\n\n\n\n  \n    \n      STATE_NAME\n      CALIFORNIA\n      WISCONSIN\n    \n    \n      LABOR_TYPE\n      CONTRACT\n      HIRED\n      CONTRACT\n      HIRED\n    \n    \n      YEAR\n      \n      \n      \n      \n    \n  \n  \n    \n      2002\n      8.1\n      21.0\n      0.4\n      11.1\n    \n    \n      2007\n      8.4\n      18.6\n      0.4\n      11.6\n    \n    \n      2012\n      9.5\n      16.6\n      0.4\n      9.3\n    \n    \n      2017\n      10.2\n      18.5\n      0.7\n      10.9\n    \n  \n\n\n\n\n\n\nExample: commodity sales by state\nThis more detailed example shows how to retrieve state-level values of farm sales by commodity type. In the map below color indicates commodity with the highest amount of sales. Hover over states to view full list of sales.\n\n\nCode\n# load relevant subset of the dataset\ndf = get_df(years=[2017], cols=['COMMODITY_DESC', 'SHORT_DESC', 'STATE_FIPS_CODE',  'VALUE'],\n            filters=[('DOMAIN_DESC', '==', 'TOTAL'),\n                     ('STATISTICCAT_DESC', '==', 'SALES'),\n                     ('UNIT_DESC', '==', '$'),\n                     ('AGG_LEVEL_DESC', '==', 'STATE')])\n\n# select sales items to report\nsales_items = [\n# 'COMMODITY TOTALS - SALES, MEASURED IN $',\n    # 'CROP TOTALS - SALES, MEASURED IN $',\n        # 'GRAIN - SALES, MEASURED IN $', \n            'CORN - SALES, MEASURED IN $',\n            'WHEAT - SALES, MEASURED IN $',\n            'SOYBEANS - SALES, MEASURED IN $',\n            'SORGHUM - SALES, MEASURED IN $',\n            'BARLEY - SALES, MEASURED IN $',\n            'RICE - SALES, MEASURED IN $',\n            'GRAIN, OTHER - SALES, MEASURED IN $',\n        'TOBACCO - SALES, MEASURED IN $',\n        'COTTON, LINT & SEED - SALES, MEASURED IN $',\n        'VEGETABLE TOTALS, INCL SEEDS & TRANSPLANTS, IN THE OPEN - SALES, MEASURED IN $',\n        'FRUIT & TREE NUT TOTALS - SALES, MEASURED IN $',\n            # 'FRUIT & TREE NUT TOTALS, (EXCL BERRIES) - SALES, MEASURED IN $',\n            # 'BERRY TOTALS - SALES, MEASURED IN $',\n        'HORTICULTURE TOTALS, (EXCL CUT TREES & VEGETABLE SEEDS & TRANSPLANTS) - SALES, MEASURED IN $',\n        'CUT CHRISTMAS TREES & SHORT TERM WOODY CROPS - SALES, MEASURED IN $',\n            # 'CUT CHRISTMAS TREES - SALES, MEASURED IN $',\n            # 'SHORT TERM WOODY CROPS - SALES, MEASURED IN $',\n        'FIELD CROPS, OTHER, INCL HAY - SALES, MEASURED IN $',\n            # 'MAPLE SYRUP - SALES, MEASURED IN $',\n    # 'ANIMAL TOTALS, INCL PRODUCTS - SALES, MEASURED IN $',\n        'POULTRY TOTALS, INCL EGGS - SALES, MEASURED IN $',\n        'CATTLE, INCL CALVES - SALES, MEASURED IN $',\n        'MILK - SALES, MEASURED IN $', \n        'HOGS - SALES, MEASURED IN $',\n        'SHEEP & GOATS TOTALS, INCL WOOL & MOHAIR & MILK - SALES, MEASURED IN $',\n        'EQUINE, (HORSES & PONIES) & (MULES & BURROS & DONKEYS) - SALES, MEASURED IN $',\n        'AQUACULTURE TOTALS - SALES & DISTRIBUTION, MEASURED IN $'\n        'SPECIALTY ANIMAL TOTALS, (EXCL EQUINE) - SALES, MEASURED IN $',\n]\ndf = df.query('SHORT_DESC.isin(@sales_items)')\n\ndf['COMMODITY_DESC'] = df['COMMODITY_DESC'].str.replace(' TOTALS', '')\n\ndf_sales = df\n\n# state shapes for mapping\nfrom pubdata import geography\ndf = geography.get_state_df(scale='20m')\\\n    .query('CONTIGUOUS')\\\n    .rename(columns={'CODE': 'STATE_FIPS_CODE', 'NAME': 'STATE'})\\\n    [['STATE_FIPS_CODE', 'STATE', 'geometry']]\n\n# top sales commodity for coloring\nd = df_sales.sort_values('VALUE', ascending=False)\\\n    .groupby('STATE_FIPS_CODE')\\\n    .first()\\\n    .rename(columns={'COMMODITY_DESC': 'TOP_SALES_COMMODITY'})\\\n    .reset_index()\\\n    [['STATE_FIPS_CODE', 'TOP_SALES_COMMODITY']]\ndf = df.merge(d, how='left', on='STATE_FIPS_CODE')\n\n# commodity sales for popups\nd = df_sales.set_index(['STATE_FIPS_CODE', 'COMMODITY_DESC'])['VALUE']\nd /= 1000\nd = d.unstack().reset_index()\ndf = df.merge(d, how='left', on='STATE_FIPS_CODE')\n\n# display interactive map\ndf.explore(column='TOP_SALES_COMMODITY', tiles='CartoDB positron')\n\n\n\nMake this Notebook Trusted to load map: File -> Trust Notebook"
  },
  {
    "objectID": "bea_io.html",
    "href": "bea_io.html",
    "title": "Input-Output Accounts",
    "section": "",
    "text": "A series of detailed tables showing how industries interact with each other and with the rest of the economy. Supply tables show the goods and services produced by domestic industries as well as imports of these goods and services. Use tables show who uses these goods and services, including other industries. Requirements tables summarize the full supply chain, including direct and indirect inputs.\nData page"
  },
  {
    "objectID": "bea_io.html#industry-by-industry",
    "href": "bea_io.html#industry-by-industry",
    "title": "Input-Output Accounts",
    "section": "Industry-by-Industry",
    "text": "Industry-by-Industry\nFunction get_ixi() provides dataframes read from “Industry-by-Industry Total Requirements, After Redefinitions” tables:\n\nIxI_TR_1997-2021_PRO_SEC.xlsx: sector, 1997-2021\nIxI_TR_1997-2021_PRO_SUM.xlsx: summary, 1997-2021\nIxI_TR_2007_2012_PRO_DET.xlsx: detail, 2007 and 2021.\n\n\n\n\n\n\n\n2021 Industry-by-Industry Total Requirements table, sector level\n\n\n\n\n\n\n\nCode\nget_ixi(2021, 'sec', True).round(3)\n\n\n\n\n\n\n  \n    \n      industry\n      Agriculture, forestry, fishing, and hunting\n      Mining\n      Utilities\n      Construction\n      Manufacturing\n      Wholesale trade\n      Retail trade\n      Transportation and warehousing\n      Information\n      Finance, insurance, real estate, rental, and leasing\n      Professional and business services\n      Educational services, health care, and social assistance\n      Arts, entertainment, recreation, accommodation, and food services\n      Other services, except government\n      Government\n    \n    \n      industry\n      \n      \n      \n      \n      \n      \n      \n      \n      \n      \n      \n      \n      \n      \n      \n    \n  \n  \n    \n      Agriculture, forestry, fishing, and hunting\n      1.301\n      0.016\n      0.009\n      0.026\n      0.095\n      0.006\n      0.007\n      0.011\n      0.007\n      0.004\n      0.006\n      0.009\n      0.017\n      0.008\n      0.015\n    \n    \n      Mining\n      0.033\n      1.150\n      0.084\n      0.044\n      0.113\n      0.009\n      0.009\n      0.016\n      0.010\n      0.006\n      0.008\n      0.011\n      0.014\n      0.011\n      0.024\n    \n    \n      Utilities\n      0.019\n      0.023\n      1.062\n      0.012\n      0.019\n      0.014\n      0.026\n      0.021\n      0.008\n      0.022\n      0.009\n      0.011\n      0.026\n      0.009\n      0.013\n    \n    \n      Construction\n      0.010\n      0.011\n      0.018\n      1.005\n      0.008\n      0.006\n      0.009\n      0.012\n      0.005\n      0.031\n      0.005\n      0.006\n      0.007\n      0.008\n      0.029\n    \n    \n      Manufacturing\n      0.356\n      0.247\n      0.145\n      0.401\n      1.563\n      0.095\n      0.092\n      0.178\n      0.111\n      0.054\n      0.089\n      0.133\n      0.149\n      0.123\n      0.209\n    \n    \n      Wholesale trade\n      0.157\n      0.062\n      0.038\n      0.095\n      0.129\n      1.045\n      0.037\n      0.045\n      0.028\n      0.015\n      0.023\n      0.037\n      0.039\n      0.029\n      0.045\n    \n    \n      Retail trade\n      0.008\n      0.005\n      0.010\n      0.056\n      0.009\n      0.003\n      1.009\n      0.016\n      0.003\n      0.005\n      0.004\n      0.003\n      0.017\n      0.015\n      0.005\n    \n    \n      Transportation and warehousing\n      0.071\n      0.060\n      0.083\n      0.053\n      0.080\n      0.060\n      0.070\n      1.170\n      0.028\n      0.014\n      0.026\n      0.022\n      0.027\n      0.021\n      0.035\n    \n    \n      Information\n      0.018\n      0.026\n      0.029\n      0.028\n      0.026\n      0.041\n      0.045\n      0.042\n      1.169\n      0.028\n      0.059\n      0.037\n      0.041\n      0.037\n      0.047\n    \n    \n      Finance, insurance, real estate, rental, and leasing\n      0.158\n      0.128\n      0.091\n      0.095\n      0.082\n      0.147\n      0.190\n      0.184\n      0.107\n      1.274\n      0.135\n      0.164\n      0.159\n      0.145\n      0.095\n    \n    \n      Professional and business services\n      0.092\n      0.171\n      0.148\n      0.154\n      0.142\n      0.224\n      0.213\n      0.184\n      0.243\n      0.142\n      1.240\n      0.165\n      0.205\n      0.126\n      0.137\n    \n    \n      Educational services, health care, and social assistance\n      0.000\n      0.000\n      0.001\n      0.001\n      0.001\n      0.001\n      0.004\n      0.001\n      0.001\n      0.000\n      0.001\n      1.014\n      0.003\n      0.007\n      0.011\n    \n    \n      Arts, entertainment, recreation, accommodation, and food services\n      0.008\n      0.008\n      0.014\n      0.008\n      0.009\n      0.013\n      0.015\n      0.028\n      0.027\n      0.018\n      0.026\n      0.027\n      1.035\n      0.016\n      0.012\n    \n    \n      Other services, except government\n      0.009\n      0.007\n      0.006\n      0.012\n      0.011\n      0.022\n      0.018\n      0.022\n      0.011\n      0.009\n      0.012\n      0.014\n      0.018\n      1.014\n      0.017\n    \n    \n      Government\n      0.018\n      0.018\n      0.039\n      0.013\n      0.021\n      0.020\n      0.022\n      0.043\n      0.015\n      0.022\n      0.012\n      0.014\n      0.021\n      0.014\n      1.016\n    \n    \n      Total industry output requirement\n      2.259\n      1.933\n      1.777\n      2.002\n      2.308\n      1.706\n      1.765\n      1.974\n      1.773\n      1.645\n      1.655\n      1.669\n      1.780\n      1.583\n      1.710"
  },
  {
    "objectID": "bea_io.html#industry-by-commodity",
    "href": "bea_io.html#industry-by-commodity",
    "title": "Input-Output Accounts",
    "section": "Industry-by-Commodity",
    "text": "Industry-by-Commodity\nFunction get_ixc() provides dataframes read from “Industry-by-Commodity Total Requirements, After Redefinitions” tables:\n\nIxC_TR_1997-2021_PRO_SEC.xlsx: sector, 1997-2021\nIxC_TR_1997-2021_PRO_SUM.xlsx: summary, 1997-2021\nIxC_TR_2007_2012_PRO_DET.xlsx: detail, 2007 and 2021.\n\n\n\n\n\n\n\n2021 Industry-by-Commodity Total Requirements table, sector level\n\n\n\n\n\n\n\nCode\nget_ixc(2021, 'sec', True).round(3)\n\n\n\n\n\n\n  \n    \n      commodity\n      Agriculture, forestry, fishing, and hunting\n      Mining\n      Utilities\n      Construction\n      Manufacturing\n      Wholesale trade\n      Retail trade\n      Transportation and warehousing\n      Information\n      Finance, insurance, real estate, rental, and leasing\n      Professional and business services\n      Educational services, health care, and social assistance\n      Arts, entertainment, recreation, accommodation, and food services\n      Other services, except government\n      Government\n      Scrap, used and secondhand goods\n      Noncomparable imports and rest-of-the-world adjustment\n    \n    \n      industry\n      \n      \n      \n      \n      \n      \n      \n      \n      \n      \n      \n      \n      \n      \n      \n      \n      \n    \n  \n  \n    \n      Agriculture, forestry, fishing, and hunting\n      1.292\n      0.016\n      0.010\n      0.026\n      0.095\n      0.006\n      0.007\n      0.011\n      0.007\n      0.004\n      0.007\n      0.009\n      0.019\n      0.008\n      0.015\n      0.046\n      0.015\n    \n    \n      Mining\n      0.033\n      1.148\n      0.071\n      0.044\n      0.120\n      0.009\n      0.009\n      0.016\n      0.010\n      0.006\n      0.009\n      0.013\n      0.015\n      0.011\n      0.024\n      0.058\n      0.024\n    \n    \n      Utilities\n      0.019\n      0.024\n      0.838\n      0.012\n      0.019\n      0.014\n      0.026\n      0.021\n      0.008\n      0.022\n      0.009\n      0.011\n      0.026\n      0.009\n      0.014\n      0.015\n      0.013\n    \n    \n      Construction\n      0.010\n      0.011\n      0.020\n      1.004\n      0.008\n      0.006\n      0.009\n      0.013\n      0.005\n      0.031\n      0.005\n      0.008\n      0.008\n      0.008\n      0.029\n      0.018\n      0.029\n    \n    \n      Manufacturing\n      0.355\n      0.249\n      0.158\n      0.401\n      1.554\n      0.095\n      0.093\n      0.178\n      0.111\n      0.055\n      0.095\n      0.142\n      0.151\n      0.123\n      0.209\n      0.740\n      0.209\n    \n    \n      Wholesale trade\n      0.157\n      0.062\n      0.040\n      0.095\n      0.128\n      1.045\n      0.037\n      0.045\n      0.028\n      0.015\n      0.023\n      0.038\n      0.039\n      0.029\n      0.045\n      0.076\n      0.045\n    \n    \n      Retail trade\n      0.008\n      0.005\n      0.009\n      0.056\n      0.009\n      0.003\n      1.006\n      0.016\n      0.003\n      0.005\n      0.004\n      0.003\n      0.017\n      0.015\n      0.005\n      0.006\n      0.005\n    \n    \n      Transportation and warehousing\n      0.074\n      0.060\n      0.073\n      0.053\n      0.080\n      0.060\n      0.070\n      1.150\n      0.028\n      0.014\n      0.027\n      0.024\n      0.027\n      0.021\n      0.035\n      0.052\n      0.035\n    \n    \n      Information\n      0.018\n      0.026\n      0.033\n      0.028\n      0.026\n      0.041\n      0.045\n      0.042\n      1.167\n      0.029\n      0.124\n      0.042\n      0.042\n      0.037\n      0.047\n      0.039\n      0.047\n    \n    \n      Finance, insurance, real estate, rental, and leasing\n      0.158\n      0.128\n      0.092\n      0.095\n      0.083\n      0.147\n      0.189\n      0.183\n      0.107\n      1.268\n      0.133\n      0.157\n      0.157\n      0.145\n      0.095\n      0.095\n      0.095\n    \n    \n      Professional and business services\n      0.093\n      0.171\n      0.146\n      0.154\n      0.142\n      0.224\n      0.212\n      0.184\n      0.244\n      0.142\n      1.174\n      0.163\n      0.203\n      0.127\n      0.137\n      0.245\n      0.137\n    \n    \n      Educational services, health care, and social assistance\n      0.001\n      0.000\n      0.003\n      0.001\n      0.001\n      0.001\n      0.004\n      0.001\n      0.001\n      0.000\n      0.001\n      0.901\n      0.004\n      0.007\n      0.011\n      0.006\n      0.011\n    \n    \n      Arts, entertainment, recreation, accommodation, and food services\n      0.008\n      0.008\n      0.013\n      0.008\n      0.009\n      0.013\n      0.015\n      0.027\n      0.027\n      0.018\n      0.026\n      0.025\n      1.007\n      0.016\n      0.012\n      0.038\n      0.012\n    \n    \n      Other services, except government\n      0.009\n      0.007\n      0.009\n      0.012\n      0.011\n      0.022\n      0.018\n      0.022\n      0.011\n      0.009\n      0.012\n      0.015\n      0.018\n      1.010\n      0.017\n      0.014\n      0.017\n    \n    \n      Government\n      0.022\n      0.018\n      0.247\n      0.013\n      0.021\n      0.020\n      0.025\n      0.060\n      0.016\n      0.027\n      0.015\n      0.123\n      0.047\n      0.017\n      1.016\n      0.496\n      1.016\n    \n    \n      Total industry output requirement\n      2.256\n      1.934\n      1.762\n      2.002\n      2.305\n      1.706\n      1.765\n      1.969\n      1.772\n      1.646\n      1.664\n      1.674\n      1.779\n      1.583\n      1.710\n      1.947\n      1.710"
  },
  {
    "objectID": "bea_io.html#commodity-by-commodity",
    "href": "bea_io.html#commodity-by-commodity",
    "title": "Input-Output Accounts",
    "section": "Commodity-by-Commodity",
    "text": "Commodity-by-Commodity\nFunction get_cxc() provides dataframes read from “Commodity-by-Commodity Total Requirements, After Redefinitions” tables:\n\nCxC_TR_1997-2021_PRO_SEC.xlsx: sector, 1997-2021\nCxC_TR_1997-2021_PRO_SUM.xlsx: summary, 1997-2021\nCxC_TR_2007_2012_PRO_DET.xlsx: detail, 2007 and 2021.\n\n\n\n\n\n\n\n2021 Commodity-by-Commodity Total Requirements table, sector level\n\n\n\n\n\n\n\nCode\nget_cxc(2021, 'sec', True).round(3)\n\n\n\n\n\n\n  \n    \n      commodity\n      Agriculture, forestry, fishing, and hunting\n      Mining\n      Utilities\n      Construction\n      Manufacturing\n      Wholesale trade\n      Retail trade\n      Transportation and warehousing\n      Information\n      Finance, insurance, real estate, rental, and leasing\n      Professional and business services\n      Educational services, health care, and social assistance\n      Arts, entertainment, recreation, accommodation, and food services\n      Other services, except government\n      Government\n      Scrap, used and secondhand goods\n      Noncomparable imports and rest-of-the-world adjustment\n    \n    \n      commodity\n      \n      \n      \n      \n      \n      \n      \n      \n      \n      \n      \n      \n      \n      \n      \n      \n      \n    \n  \n  \n    \n      Agriculture, forestry, fishing, and hunting\n      1.301\n      0.016\n      0.010\n      0.027\n      0.096\n      0.006\n      0.007\n      0.012\n      0.007\n      0.004\n      0.007\n      0.009\n      0.018\n      0.008\n      0.015\n      0.047\n      0.015\n    \n    \n      Mining\n      0.031\n      1.149\n      0.070\n      0.041\n      0.109\n      0.008\n      0.009\n      0.015\n      0.009\n      0.006\n      0.008\n      0.012\n      0.014\n      0.010\n      0.023\n      0.056\n      0.023\n    \n    \n      Utilities\n      0.024\n      0.030\n      1.065\n      0.015\n      0.024\n      0.017\n      0.033\n      0.026\n      0.011\n      0.028\n      0.011\n      0.015\n      0.033\n      0.011\n      0.017\n      0.020\n      0.016\n    \n    \n      Construction\n      0.010\n      0.011\n      0.020\n      1.005\n      0.008\n      0.006\n      0.009\n      0.013\n      0.005\n      0.031\n      0.005\n      0.008\n      0.008\n      0.008\n      0.029\n      0.018\n      0.029\n    \n    \n      Manufacturing\n      0.356\n      0.247\n      0.156\n      0.402\n      1.562\n      0.095\n      0.092\n      0.179\n      0.111\n      0.054\n      0.092\n      0.142\n      0.151\n      0.121\n      0.209\n      0.339\n      0.209\n    \n    \n      Wholesale trade\n      0.157\n      0.062\n      0.040\n      0.095\n      0.128\n      1.045\n      0.037\n      0.045\n      0.028\n      0.015\n      0.023\n      0.038\n      0.039\n      0.029\n      0.045\n      0.076\n      0.045\n    \n    \n      Retail trade\n      0.008\n      0.005\n      0.009\n      0.057\n      0.009\n      0.003\n      1.009\n      0.016\n      0.003\n      0.005\n      0.004\n      0.003\n      0.017\n      0.015\n      0.005\n      0.007\n      0.005\n    \n    \n      Transportation and warehousing\n      0.072\n      0.061\n      0.074\n      0.053\n      0.081\n      0.061\n      0.071\n      1.170\n      0.028\n      0.014\n      0.027\n      0.024\n      0.028\n      0.021\n      0.036\n      0.053\n      0.036\n    \n    \n      Information\n      0.012\n      0.015\n      0.024\n      0.018\n      0.017\n      0.027\n      0.032\n      0.031\n      1.154\n      0.020\n      0.051\n      0.028\n      0.028\n      0.029\n      0.038\n      0.030\n      0.038\n    \n    \n      Finance, insurance, real estate, rental, and leasing\n      0.159\n      0.129\n      0.092\n      0.096\n      0.083\n      0.147\n      0.190\n      0.184\n      0.108\n      1.274\n      0.134\n      0.157\n      0.158\n      0.146\n      0.095\n      0.096\n      0.095\n    \n    \n      Professional and business services\n      0.099\n      0.183\n      0.155\n      0.164\n      0.152\n      0.240\n      0.227\n      0.197\n      0.260\n      0.152\n      1.256\n      0.174\n      0.217\n      0.135\n      0.147\n      0.161\n      0.147\n    \n    \n      Educational services, health care, and social assistance\n      0.001\n      0.000\n      0.003\n      0.001\n      0.001\n      0.001\n      0.004\n      0.001\n      0.001\n      0.001\n      0.001\n      1.016\n      0.004\n      0.008\n      0.012\n      0.006\n      0.012\n    \n    \n      Arts, entertainment, recreation, accommodation, and food services\n      0.009\n      0.008\n      0.014\n      0.008\n      0.009\n      0.014\n      0.016\n      0.028\n      0.028\n      0.019\n      0.027\n      0.026\n      1.036\n      0.016\n      0.012\n      0.013\n      0.012\n    \n    \n      Other services, except government\n      0.009\n      0.007\n      0.009\n      0.012\n      0.011\n      0.022\n      0.018\n      0.022\n      0.011\n      0.009\n      0.012\n      0.015\n      0.018\n      1.014\n      0.017\n      0.014\n      0.017\n    \n    \n      Government\n      0.003\n      0.002\n      0.008\n      0.002\n      0.003\n      0.008\n      0.006\n      0.014\n      0.003\n      0.004\n      0.003\n      0.004\n      0.005\n      0.003\n      1.004\n      0.004\n      0.004\n    \n    \n      Scrap, used and secondhand goods\n      0.001\n      0.003\n      0.008\n      0.003\n      0.005\n      0.000\n      0.001\n      -0.001\n      0.000\n      0.000\n      0.001\n      0.001\n      0.001\n      0.005\n      0.001\n      1.003\n      0.001\n    \n    \n      Noncomparable imports and rest-of-the-world adjustment\n      0.006\n      0.006\n      0.005\n      0.004\n      0.007\n      0.005\n      0.005\n      0.019\n      0.007\n      0.009\n      0.003\n      0.003\n      0.005\n      0.003\n      0.005\n      0.006\n      1.005\n    \n    \n      Total commodity output\n      2.256\n      1.934\n      1.762\n      2.002\n      2.305\n      1.706\n      1.765\n      1.969\n      1.772\n      1.646\n      1.664\n      1.674\n      1.779\n      1.583\n      1.710\n      1.947\n      1.710"
  },
  {
    "objectID": "bea_io.html#concordance-properties",
    "href": "bea_io.html#concordance-properties",
    "title": "Input-Output Accounts",
    "section": "Concordance properties",
    "text": "Concordance properties\nNo overlaps between branches of the SECTOR -> SUMMARY -> U_SUMMARY -> DETAIL hierarchy. - No code in one branch exists in another branch. - From a code in one level, can unambiguously go to upper levels.\nConstruction (IO sector “23”, NAICS sector “23”) matches exactly on sector level, i.e. no part of IO “23” maps to NAICS outside of “23”, and no part of NAICS “23” maps to IO outside of “23”. But match below sector level is impossible. Explanation from IO footnote:\n\nConstruction data published by BEA at the detail level do not align with 2012 NAICS industries. In NAICS, industries are classified based on their production processes, whereas BEA construction is classified by type of structure. For example, activity by the 2012 NAICS Roofing contractors industry would be split among many BEA construction categories because roofs are built on many types of structures.\n\n16 IO detail industries do not map into any NAICS. Most of them are in sector “G” (Goverment).\nAn ambiguity exists in IO sector “53” (REAL ESTATE AND RENTAL AND LEASING). Two detail level industries (“531HST” and “531ORE”) map into the same 3-digit NAICS “531” (Real Estate). There are no other NAICS duplicates.\nWith the exception of NAICS “23”, “n.a.” and “531” relationship between IO DETAIL and NAICS is one-to-many."
  },
  {
    "objectID": "bea_io.html#naics-coverage",
    "href": "bea_io.html#naics-coverage",
    "title": "Input-Output Accounts",
    "section": "NAICS coverage",
    "text": "NAICS coverage\nWhich NAICS industries are covered by the IO industries?\nIn sum, every industry in the NAICS is covered and no industry is covered more than once with these caveats: - Sector “23” (construction) only maps at the sector level. - Government (sector “G” in IO and “92” in NAICS) likely maps at the sector level. - NAICS subsector “531” (real estate) is covered twice.\nEvery NAICS code present in IO concordance is a valid code that exists in NAICS table.\nNo NAICS code matches on more than one level. I.e. there is no situation when some lower NAICS level is covered more than once because it’s parent is include someplace else.\nEvery industry outside of sector “92” is covered. Nothing is covered in sector “92”.\nNAICS sector “92” (Public Administration) is similar to IO sector “G” (GOVERNMENT). This looks similar to the construction sector “23”: although sectors are alike, lower level division is done on a different principle. Although unlike “23”, the crosswalk is not explicitly stating that NAICS “92” can be mapped to IO “G” on a sector level. Maybe because of the “Postal service” industry (IO detail “491000”, part of sector “G”) that corresponds to NAICS subsector “491”."
  },
  {
    "objectID": "bea_io.html#digit-crosswalk",
    "href": "bea_io.html#digit-crosswalk",
    "title": "Input-Output Accounts",
    "section": "3-digit crosswalk",
    "text": "3-digit crosswalk\nBEA “summary” can be compared to NAICS “subsector”. BEA->NAICS crosswalk is often one-to-many, which is not a problem when we convert NAICS-based data to match BEA. But BEA->NAICS is also many-to-one for three NAICS subsectors (336, 531, 541)."
  },
  {
    "objectID": "io_for_dummies.html",
    "href": "io_for_dummies.html",
    "title": "IO for Dummies",
    "section": "",
    "text": "This R Markdown document is a reference page for all things Input-Output related.\n\nIO FundamentalsIO ExtentionsRegional IORegional IO ExtentionsFurther ReadingEmpericsNotes\n\n\nIntroduction\nI-O analysis, or “inter-industry analysis,” is an economic tool that measures the relationships between various industries in the economy. The framework measures flows of products from each of the sectors (as a producer/seller) to each of the sectors (as a purchaser/buyer); these interindustry flows, or transactions (or intersectoral flows – the terms industry and sector are often used interchangeably in input–output analysis) are measured for a particular time period (usually a year) and in monetary terms.\nFundamental Relationships\nAssume that the economy can be categorized into \\(n\\) sectors and denote the total output (production) of sector \\(i\\), \\(x_{i}\\). In addition, there are sales to purchasers who are external or exogenous to the industrial sectors that constitute the producers in the economy e.g., households, government, and foreign trade. The demand of these external units, is referred to as final demand. Denote total final demand for sector \\(i\\)’s product, \\(f_{i}\\). The accounting equation for the way sector \\(i\\) distributes its product to other sectors and to final demand is given by:\n\\[\\begin{equation}\nx_{i} = z_{i1} + ... + z_{ij} + ... + z_{in} + f_{i} = \\sum^{n}_{j=1} z_{ij} + f_{i}\n\\end{equation}\\]\nThe \\(z_{ij}\\) terms represent monetary transactions between pairs of sectors or interindustry sales (intermediate sales) by sector \\(i\\) to all sectors \\(j\\) (including itself, when \\(j = i\\)). This single equation represents sector \\(i\\)’s output. Similarly, there are output equations for each of the \\(n\\) sectors in the economy.\n\\[\\begin{align*}\n& x_{1} = z_{11} + ... + z_{1j} + ... + z_{1n} + f_{1} \\\\\n& \\vdots \\\\\n& x_{i} = z_{i1} + ... + z_{ij} + ... + z_{in} + f_{i} \\\\\n& \\vdots \\\\\n& x_{n} = z_{n1} + ... + z_{nj} + ... + z_{nn} + f_{n} \\\\\n\\end{align*}\\]\nThe total output, interindustry sales, and final demand are given by:\n\\[\\begin{equation}\n\\mathbf{x} =\n  \\begin{bmatrix}\n  x_{1} \\\\\n  \\vdots \\\\\n  x_{n} \\\\\n  \\end{bmatrix}, \\; \\;\n\\mathbf{Z} =\n  \\begin{bmatrix}\n    z_{11} & \\dots & z_{1n}\\\\\n    \\vdots & \\ddots & \\vdots\\\\\n    z_{n1} & \\dots & z_{nn} \\\\\n  \\end{bmatrix}\n, \\; \\text{  and } \\; \\;\n\\mathbf{f} =\n  \\begin{bmatrix}\n    f_{1} \\\\\n    \\vdots \\\\\n    f_{n} \\\\\n  \\end{bmatrix}\n\\end{equation}\\]\nwith the output equations for distribution of each sector’s sales summarized in matrix notation as:\n\\[\\mathbf{x} = \\mathbf{Zi} + \\mathbf{f}\\]\nwhere \\(\\mathbf{i}\\) represent a column vector of 1’s. (Postmultiplication of a matrix by \\(\\mathbf{i}\\) creates a column vector whose elements are the row sums of the matrix. Similarly, premultiplication of a matrix by \\(\\mathbf{i'}\\) creates a row vector whose elements are the column sums of the matrix.)\nThe magnitudes of the interindustry flows can be recorded in a table, with sectors of origin (producers) listed on the left and the same sectors, now destinations (purchasers), listed across the top. From the column point of view, these show each sector’s inputs; from the row point of view the figures are each sector’s outputs; hence the name input–output table.\n\\[\\begin{equation}\n\\begin{matrix}\n&  & 1 & \\dots & j & \\dots & n \\\\\n\\hline\n1 & & z_{11} & \\dots & z_{1j} & \\dots & z_{1n} \\\\\n\\vdots & & \\vdots &  & \\vdots &  & \\vdots \\\\\ni & & z_{i1} & \\dots & z_{ij} & \\dots & z_{in} \\\\\n\\vdots & & \\vdots &  & \\vdots &  & \\vdots \\\\\nn & & z_{n1} & \\dots & z_{nj} & \\dots & z_{nn} \\\\\n\\hline\n\\end{matrix}\n\\end{equation}\\]\nTechnical Coefficients\nIn input–output studies, a fundamental assumption is that the interindustry flows from \\(i\\) to \\(j\\) depend entirely on the total output of sector \\(j\\) for that same time period. The quantity of the output of sector \\(i\\) absorbed by sector \\(j\\) per unit of its total output is identified as \\(a_{ij}\\) and called the input coefficient of sector \\(i\\)’s product in sector \\(j\\).\n\\(a_{ij} = z_{ij} / x_{j}\\)\nA complete table of input coefficients is called a structural matrix, given by: \\(\\mathbf{A} = \\left[a_{ij}\\right]\\). This ratio is also called the technical coefficient; the terms input–output coefficient and direct input coefficient are also used. This ratio specifies the required amount of industry \\(i\\)’s commodity used to produce of one unit of industry \\(j\\)’s commodity, or how much of the \\(i\\)th commodity is used for the production of each unit of the \\(j\\)th commodity. Therefore the \\(n \\times n\\) matrix of technical coefficients can be represented as\n\\[\\mathbf{A} = \\mathbf{Z\\hat{x}}^{-1}\\] where the “hat” over a vector denotes a diagonal matrix with the elements of the vector along the main diagonal i.e.,\n\\[\\begin{equation}\n\\mathbf{\\hat{x}^{-1}} =\n  \\begin{bmatrix}\n    \\dfrac{1}{x_{1}} & \\dots & 0\\\\\n    \\vdots & \\ddots & \\vdots\\\\\n    0 & \\dots & \\dfrac{1}{x_{n}} \\\\\n  \\end{bmatrix}\n\\end{equation}\\]\nand the inverse must satisfy the usual requirement \\((\\mathbf{\\hat{x}})(\\mathbf{\\hat{x}})^{-1} = \\mathbf{I}\\).\nNote input–output analysis requires that a sector use inputs in fixed proportions. The form of the production function inherent in input–output systems are isoquant “curves” that exhibit constant output. Such Leontief production functions require inputs in fixed proportions where a fixed amount of each input is required to produce one unit of output. Given a set of fixed technical coefficients, the accounting equations for the distribution of total output to other sectors and to final demand can be rewritten as\n\\[\\begin{align*}\n& x_{1} = a_{11}x_{1} + ... + a_{1j}x_{i} + ... + a_{1n}x_{n} + f_{1} \\\\\n& \\vdots \\\\\n& x_{i} = a_{i1}x_{1} + ... + a_{ij}x_{i} + ... + a_{in}x_{n} + f_{i} \\\\\n& \\vdots \\\\\n& x_{n} = a_{n1}x_{1} + ... + a_{nj}x_{i} + ... + a_{nn}x_{n} + f_{n} \\\\\n\\end{align*}\\]\nOr in matrix notation as\n\\[\\mathbf{x} = \\mathbf{Ax} + \\mathbf{f}\\]\nThese equations serve to make explicit the dependence of interindustry flows on the total outputs of each sector.\nIO Analysis\nIn input–output analysis, one may pose the question: If the demands of the exogenous sectors were forecast to be some specific amounts next year, how much output from each of the sectors would be necessary to supply these final demands? From the point of view of this equation, the \\(f_{1} \\dots f_{n}\\) are known numbers, the \\(a_{ij}\\) are known coefficients, and the \\(x_{1} \\dots x_{n}\\) are to be found. Rearranging to answer the question gives:\n\\[\\begin{align*}\n& \\left(1- a_{11}\\right)x_{1} - ... - a_{1j}x_{i} - ... - a_{1n}x_{n} = f_{1} \\\\\n& \\vdots \\\\\n& -a_{i1}x_{1} - ... + \\left(1- a_{ij}\\right)x_{i} - ... - a_{in}x_{n} = f_{i} \\\\\n& \\vdots \\\\\n& -a_{n1}x_{1} - ... - a_{nj}x_{i} - ... + \\left(1- a_{nn}\\right)x_{n} = f_{n} \\\\\n\\end{align*}\\]\nOr in matrix notation as\n\\[\\left(\\mathbf{I} - \\mathbf{A}\\right)\\mathbf{x} = \\mathbf{f}\\] If \\(\\left(\\mathbf{I} - \\mathbf{A}\\right)\\) is non-singular, that is, \\(\\left(\\mathbf{I} - \\mathbf{A}\\right)^{-1}\\) exists, then the solution is given by\n\\[\\mathbf{x} = \\left(\\mathbf{I} - \\mathbf{A}\\right)^{-1}\\mathbf{f} = \\mathbf{Lf}\\] where \\(\\left(\\mathbf{I} - \\mathbf{A}\\right)^{-1} = \\mathbf{L} = \\left[l_{ij}\\right]\\) is known as the Leontief inverse or the total requirements matrix. Also recognizing that \\(\\partial{x_{i}}/\\partial{f_{j}} = l_{ij}\\), this equation makes clear the dependence of gross output on the value of final demand.\nThe input–output model allows us to deal equally easily with changes in demands and outputs instead of levels. Assuming that technology is unchanged \\(\\mathbf{A}^{base} = \\mathbf{A}^{new} = \\mathbf{A}\\) and \\(\\mathbf{L}^{base} = \\mathbf{L}^{new} = \\mathbf{L}\\), so \\(\\mathbf{x}^{base} = \\mathbf{Lf}^{base}\\) and \\(\\mathbf{x}^{new} = \\mathbf{Lf}^{new}\\); letting \\(\\Delta \\mathbf{x} = \\mathbf{x}^{new} - \\mathbf{x}^{base}\\) and \\(\\Delta \\mathbf{f} = \\mathbf{f}^{new} - \\mathbf{f}^{base}\\) provides\n\\[\\Delta \\mathbf{x} = \\mathbf{Lf}^{new} - \\mathbf{Lf}^{base} = \\mathbf{L}\\Delta\\mathbf{f}\\]\n\n\nCommodity-by-Industry Approach in Input–Output Models\nTo explicitly account for “non-characteristic” production such as secondary products and by-products a “commodity–industry” format was developed. This format allows for the fact that an industry may produce more than one commodity. The underlying motivational observation is that industries use commodities to make commodities. It is commodities that are the inputs to industrial processes and that are used to satisfy final demands. An industry can be thought of as defined by its primary product (commodity) but some industries also produce additional commodities as secondary products. In order to highlight the differentiation between commodities and industries, assume that the commodity index, \\(i\\), runs from 1 to \\(m\\) and the industry index, \\(j\\), runs from 1 to \\(n\\).\nThis more realistic classification scheme accounts for industrial production by commodity type rather than industry category. More recent studies, including the US National Tables complied for years since 1972, redefine all secondary production by establishing a set of “commodity-by-industry” accounts. In national accounting parlance, the commodity-by-industry interindustry transactions tables are also often referred to as Make or Supply, and Use tables. The core of modern I-O accounts consists of these two basic national-accounting tables.\nUse and Make Tables\nThe Use table shows the uses of commodities by intermediate and final users. The rows in the Use table present the commodities or products, and the columns display the industries and final users that utilize them. The sum of the entries in a row is the output of that commodity. The columns show the products consumed by each industry and the three components of “value added”—compensation of employees, taxes on production and imports less subsidies, and gross operating surplus. Value added is the difference between an industry’s output and the cost of its intermediate inputs, and total value added is equal to GDP. The sum of the entries in a column is that industry’s output.\nThe “industries use commodities” part of the “industries use commodities to make commodities” observation is quantified in the Use matrix \\(\\underset{(c \\times i)}{\\mathbf{U}} = [u_{ij}]\\) where \\(u_{ij}\\) is the value of purchases of commodity \\(i\\) by industry \\(j\\).\nIn conjunction with total industry output, \\(\\mathbf{x}\\), the parallel to the ordinary technical coefficient, \\(a_{ij}\\), is\n\\[b_{ij} = u_{ij}/x_{j}\\] Or in matrix notation as\n\\[\\mathbf{B} = \\mathbf{U\\hat{x}}^{-1}\\]\nThe Use matrix, \\(\\mathbf{U}\\) is constructed in dimensions of commodities (rows) by industries (columns) and, in matrix terms, the accounting identities are \\(\\mathbf{q} = \\mathbf{Ui} + \\mathbf{e}\\) and \\(\\mathbf{x'} = \\mathbf{i'U} + \\mathbf{v'}\\), where \\(\\mathbf{q}\\) is the vector of total commodity outputs, \\(\\mathbf{e}\\) is the vector of commodity final demands, \\(\\mathbf{v'}\\) is the (row) vector of total value-added inputs, and \\(\\mathbf{x}\\) is the vector of total industry outputs. The dimensions of \\(\\mathbf{B}\\) are therefore commodities-by-industries.\nThe Make table shows the production of commodities by industries, \\(\\underset{(i \\times c)}{\\mathbf{V}} = [v_{ij}]\\). The rows present the industries, and the columns display the commodities that the industries produce. Looking across a row, all the commodities produced by that industry are identified, and the sum of the entries is that industry’s output. Looking down a column, all the industries producing that commodity are identified, and the sum of the entries is the output of that commodity. Define the Make matrix (or output matrix) as \\(\\mathbf{V}\\), the row sums of which comprise the vector of total industry output, \\(\\mathbf{x} = \\mathbf{Vi}\\), and the column sums of which comprise total commodity output, \\(\\mathbf{q'} = \\mathbf{i'V}\\).\nAccounting Equations\nIn the commodity–industry framework, both total industry output (\\(\\mathbf{x}\\)) and total commodity output (\\(\\mathbf{q}\\)) are accounted for. From the data in the Make matrix, total output of any industry is found by summing over all commodities produced by that industry. These totals are the row sums of \\(\\mathbf{V}\\),\n\\[\\begin{equation}\nx_{j} = v_{j1} + ... + v_{jm}\n\\end{equation}\\]\nOr in matrix notation as\n\\[\\mathbf{x} = \\mathbf{Vi}\\]\ntotal output of any commodity can be found by summing over all industries that produce the commodity. These totals are the column sums of \\(\\mathbf{V}\\).\n\\[\\begin{equation}\nq_{j} = v_{1j} + ... + v_{nj}\n\\end{equation}\\]\nOr in matrix notation as\n\\[\\mathbf{q'} = \\mathbf{i'V} \\;  \\; \\text{ or } \\;\\;   \\mathbf{q} = \\mathbf{V'i}\\] Alternatively, from the Use matrix\n\\[\\begin{equation}\nq_{j} = u_{j1} + ... + u_{jn} + e_{j}\n\\end{equation}\\]\nOr in matrix notation as\n\\[\\mathbf{q} = \\mathbf{Ui} + \\mathbf{e}\\] The commodity–industry approach employs the input matrix, \\(\\mathbf{B}\\), from the Use table, where \\(\\mathbf{U} = \\mathbf{B\\hat{x}}\\) much in the same way as the input \\(\\mathbf{A}\\) matrix of technical coefficients, giving\n\\[\\mathbf{q} = \\mathbf{Bx} + \\mathbf{e}\\] akin to the ordinary \\(\\mathbf{x} = \\mathbf{Ax} + \\mathbf{f}\\) specification. However, unlike the ordinary specification one cannot generate a total requirements matrix (Leontief inverse) because of the presence of both commodity output (\\(\\mathbf{q}\\)) on the left-hand side and industry output (\\(\\mathbf{x}\\)) on the right-hand side.\nOne solution to this problem is to find an expression transforming industry outputs, \\(\\mathbf{x}\\), to commodity outputs, \\(\\mathbf{q}\\) – or, alternatively, to transform commodity outputs (and commodity final demand, \\(\\mathbf{e}\\)) into industry terms. The data needed for such transformations are to be found in the Make matrix, whose row sums are industry outputs and whose column sums are commodity outputs.\nTechnology and Total Requirement Matrices\nThe direct requirements table shows the amount of a commodity that is required by an industry to produce a dollar of the industry’s output. Total requirements tables show the relationship between final uses and gross output. There are three variations of total requirements tables. The commodity-by-commodity total requirements table shows the production required, both directly and indirectly, of the commodity at the beginning of each row per dollar of delivery to final use of the commodity at the top of the column. The industry-by-commodity total requirements table shows the production required, both directly and indirectly, from the industry at the beginning of the row per dollar of delivery to final use of the commodity at the top of the column. The industry-by-industry total requirements table shows the production required, both directly and indirectly, from the industry at the beginning of the row per dollar of delivery to final use of the industry at the top of the column.\nDefine \\(d_{ij} = v_{ij}/q_{j}\\), so that \\(d_{ij}\\) denotes the fraction of total commodity \\(j\\) output that was produced by industry \\(i\\). Therefore a matrix of commodity output proportions, \\(\\underset{(i \\times c)}{\\mathbf{D}} = [d_{ij}]\\) is denoted as\n\\[\\mathbf{D} = \\mathbf{V\\hat{q}}^{-1}\\] \\(\\mathbf{D}\\) is often called the market shares matrix, and by definition, each column sum in \\(\\mathbf{D}\\) is unity.\nDefine \\(c_{ij} = v_{ij}/x_{i}\\), so that \\(c_{ij}\\) denotes the fraction of total industry \\(i\\) output that is in the form of commodity \\(j\\). These industry output proportions, \\(\\underset{(c \\times i)}{\\mathbf{C}} = [c_{ij}]\\) are denoted as\n\\[\\mathbf{C} = \\mathbf{V'\\hat{x}}^{-1}\\] \\(\\mathbf{C}\\) is often called the product mix matrix or the commodity mix matrix, and \\(\\mathbf{V'}\\) is refered to as the supply matrix. By definition, each column sum in \\(\\mathbf{D}\\) is unity.\nThese output matrices offer two possible sources from which to generate the technology and total requirement matrices from the Make/Use tables. Let the Direct Requirements Matrices be given by\n\\[\\begin{equation}\n\\underset{(i \\times i)}{\\mathbf{A}_{C}}  = \\mathbf{C}^{-1}\\mathbf{B} \\; \\text{, } \\; \\;\n%\n\\underset{(i \\times i)}{\\mathbf{A}_{I}}  = \\mathbf{D}\\mathbf{B} \\; \\text{, } \\; \\;\n%\n\\underset{(c \\times c)}{\\mathbf{A}_{C}}  = \\mathbf{B}\\mathbf{C}^{-1} \\; \\text{, and } \\; \\;\n%\n\\underset{(c \\times c)}{\\mathbf{A}_{I}}  = \\mathbf{B}\\mathbf{D}\n\\end{equation}\\]\nCommodity-Demand Driven Models\n\nUsing \\(\\mathbf{D}\\), one can derive the commodity-by-commodity total requirements matrix, connecting commodity final demand to commodity output by:\n\\[\\mathbf{q} = \\left(\\mathbf{I} - \\mathbf{BD}\\right)^{-1}\\mathbf{e}\\] and the industry-by-commodity total requirements matrix, connecting commodity final demand to industry output by:\n\\[\\mathbf{x} = [\\mathbf{D}\\left(\\mathbf{I} - \\mathbf{BD}\\right)^{-1}]\\mathbf{e}\\]\nUsing \\(\\mathbf{D}\\), one can derive the commodity-by-commodity total requirements matrix, connecting commodity final demand to commodity output by:\n\\[\\mathbf{q} = (\\left(\\mathbf{I} - \\mathbf{BC}\\right)^{-1})^{-1}\\mathbf{e}\\] and the industry-by-commodity total requirements matrix, connecting commodity final demand to industry output by:\n\\[\\mathbf{x} = [\\mathbf{C}^{-1}(\\mathbf{I} - \\mathbf{BC}^{-1})^{-1}]\\mathbf{e}\\]\nIndustry-Demand Driven Models\nIt is also possible to derive total requirements matrices for industry-demand driven models, replacing \\(\\mathbf{e}\\) by an equivalent expression involving \\(\\mathbf{f}\\) in appropriate equations\n\nUsing \\(\\mathbf{D}\\), one can derive the industry-by-industry total requirements matrix, connecting industry final demand to industry output by:\n\\[\\mathbf{q} = \\left(\\mathbf{I} - \\mathbf{DB}\\right)^{-1}\\mathbf{f}\\] and the industry-by-commodity total requirements matrix, connecting commodity final demand to industry output by:\n\\[\\mathbf{x} = [\\mathbf{D}^{-1}\\left(\\mathbf{I} - \\mathbf{DB}\\right)^{-1}]\\mathbf{f}\\]\nUsing \\(\\mathbf{D}\\), one can derive the commodity-by-commodity total requirements matrix, connecting commodity final demand to commodity output by:\n\\[\\mathbf{q} = ((\\mathbf{I} - \\mathbf{C}^{-1} \\mathbf{B})^{-1})^{-1}\\mathbf{f}\\] and the industry-by-commodity total requirements matrix, connecting commodity final demand to industry output by:\n\\[\\mathbf{x} = [\\mathbf{C}(\\mathbf{I} - \\mathbf{C}^{-1}\\mathbf{B})^{-1}]\\mathbf{f}\\]\n\n\nInput–Output Models at the Regional Level\nThere are at least two basic features of a regional economy that influence the characteristics of a regional input–output study.\nFirst, although the national input–output coefficients are averages of data from individual producers in specific regions, the structure of production in a particular region may be identical to or it may differ markedly from the national input–output tables. Secondly, the smaller the economic area the more dependent that area’s economy is on trade with “outside” areas – transactions that cross the region’s borders – both for sales of regional outputs and purchases of inputs needed for production. That is, exports will be relatively more important and a higher proportion of inputs will be imported from outside the region.\nSingle-Region Models\nLet superscript \\(r\\) designate “region \\(r\\)” in the same way that subscript \\(i\\) denotes “sector \\(i\\).” Thus, just as \\(X_{i}\\) denotes the gross output of sector \\(i\\), let \\(\\mathbf{x^{r}} = [x^{r}_{i}]\\) denote the vector of gross output of sectors in region \\(r\\). Similarly, \\(\\mathbf{f^{r}} = [f^{r}_{i}]\\) represents the vector of exogenous demand for goods made in region \\(r\\).\nThe problem is that only a national technical coefficients matrix, \\(\\mathbf{A}\\), is available, but what is needed is a matrix showing inputs from firms in the region to production in that region. Denote this matrix by \\(\\mathbf{A^{rr}} = [a^{rr}_{ij}]\\), where \\(a^{rr}_{ij}\\) is the amount of input from sector \\(i\\) in \\(r\\) per dollar’s worth of output of sector \\(j\\) in \\(r\\). For now assume that local producers use the same production recipes as the national coefficients table, meaning that the technology of production in each sector in region \\(r\\) is the same as in the nation as a whole. To translate regional final demands into outputs of regional firms (\\(\\mathbf{x^{r}}\\)), the national coefficients matrix must be modified to produce \\(\\mathbf{A^{rr}}\\) (locally produced goods in local production).\nRegional Supply Percentages\nOne option is through the use of estimated regional supply percentages, one for each sector in the regional economy, designed to show the percentage of the total required outputs from each sector that could be expected to originate within the region. One way to estimate these percentages requires knowledge of (1) total regional output of each sector \\(i\\), \\(x^{r}_{i}\\), (2) exports of the product of each sector \\(i\\) from region \\(r\\), \\(e^{r}_{i}\\), and (3) imports of good \\(i\\) into region \\(r\\), \\(m^{r}_{i}\\). Then, one can form an expression for the proportion of the total amount of good \\(i\\) available in region \\(r\\) that was produced in \\(r\\) (the regional supply proportion of good \\(i\\)). Denote this by \\(p^{r}_{i}\\), where\n\\[p^{r}_{i} = \\frac{x^{r}_{i} - e^{r}_{i}}{x^{r}_{i} - e^{r}_{i} + m^{r}_{i}}\\]\nThe numerator is the locally produced amount of \\(i\\) that is available to purchasers in \\(r\\); the denominator is the total amount of \\(i\\) available in \\(r\\), either produced locally or imported. (Thus \\(p^{r}_{i} \\times 100\\) is an estimate of the regional supply percentage for sector \\(i\\) in region \\(r\\) i.e., the percentage of good \\(i\\) available in \\(r\\) that was produced there.) Each element in the \\(i\\)th row of the national coefficients matrix could be multiplied by \\(p^{r}_{i}\\) to generate a row of locally produced direct input coefficients of good \\(i\\) to each local producer. Arranging these proportions in an \\(n\\)-element column vector, \\(\\mathbf{p^{r}}\\), then a working estimate of the regional matrix will be \\(\\mathbf{A^{rr} = \\hat{p}^{r}A}\\).\nRegional Coefficients\nIn even very disaggregated national input–output tables sectors are made up of a variety of products. And firms within that sector, located in various regions of the country, will produce only a small number of those products. This illustrates the so-called product-mix problem in input–output; firms classified in the same sector actually produce different sets of products. The most straightforward way to avoid this problem is to survey firms in the region and construct what is called a survey-based regional input–output table.\nLet \\(z^{rr}_{ij}\\) denote the dollar flow of goods from sector \\(i\\) in region \\(r\\) to sector \\(j\\) in region \\(r\\). Just as the order of subscripts is “from–to” with respect to sectors, the order of superscripts indicates “from–to” with respect to geographic locations. Given a complete set of data on \\(z^{rr}_{ij}\\) for all \\(n\\) sectors in the regional economy, and also data on gross outputs (\\(x^{r}_{j}\\)) of each sector in the region, a set of regional input coefficients could be derived as\n\\[a^{rr}_{ij} = \\frac{z^{rr}_{ij}} {x^{r}_{j}}\\]\nLet \\(\\underset{(n \\times n)}{\\mathbf{Z^{rr}}} = [z^{rr}_{ij}]\\) and \\(\\underset{(n \\times 1)}{\\mathbf{x^{r}}} = [x^{r}_{j}]\\); then the regional input coefficients matrix is\n\\[\\mathbf{A^{rr}} = \\mathbf{Z^{rr}\\left(\\hat{x}^{r}\\right)^{-1} }\\]\nThis matrix is approximated in the formula above by \\(\\mathbf{\\hat{p}^{r}A}\\). Note that this specification utilizes intraregional information only.\nThe impact on regional production of a final-demand change in region \\(r\\) is found as\n\\[\\mathbf{x^{r}} = (\\mathbf{I} - \\mathbf{A^{rr})^{-1}f^{r} }\\]\nMany-Region Input–Output Models\nSingle-region models, of the sort just described, represent one approach to modeling a regional economy in input–output terms. What they fail to do, however, is to recognize in an operational way the interconnections between regions. The one region of interest (region \\(r\\)) is “disconnected” from the rest of the country within which it is located, in the sense that its production recipes are reflected in an intraregional matrix, \\(\\mathbf{A^{rr}}\\). A fundamental problem in many-region input–output modeling is therefore estimation of transactions between regions. One approach, the interregional model, requires a complete (ideal) set of both intra- and interregional data.\nLet \\(z^{rr}_{ij}\\) denote the dollar flow of goods from sector \\(i\\) in region \\(r\\) to sector \\(j\\) in region \\(r\\). For the two-region case, this means knowing \\(\\mathbf{x^{r}} = [x^{r}_{i}]\\), \\(\\mathbf{x^{s}} = [x^{s}_{i}]\\), \\(\\mathbf{Z^{rr}} = [z^{rr}_{ij}]\\), \\(\\mathbf{Z^{ss}} = [z^{ss}_{ij}]\\), \\(\\mathbf{Z^{sr}} = [z^{sr}_{ij}]\\) - recording transactions from sector \\(i\\) in region \\(r\\) to sector \\(j\\) in region \\(s\\) – \\(\\mathbf{Z^{rs}} = [z^{rs}_{ij}]\\) – in which flows from \\(s\\) to \\(r\\) are captured. It is the last two matrices that cause the most trouble. In practice, it is never the case that one has such detailed information, and the requirements grow quickly with the number of regions – a three-region model has six interregional matrices, a four-region model has 12, and so on.\nMany alternative forms of many-region input–output models exist. Chronologically they are\n\nthe interregional input–output model (IRIO) structure (often labeled the “Isard model”),\nthe intranational input–output model (often referred to as a “balanced regional model”),\nthe multiregional input–output model (MRIO) (often labeled a “Chenery–Moses model”),\nand a gravity-model approach of interregional flows in a connected region input–output model.\n\nTwo-Region Interregional Input–Output Model\nUsing \\(r\\) and \\(s\\), for the two regions, let there be three producing sectors (1, 2, 3) in region \\(r\\) and two (1, 2) in region \\(s\\). Suppose that one has information for region \\(r\\) on both intraregional flows, \\(z^{rr}_{ij}\\), and interregional flows, \\(z^{sr}_{ij}\\). There will be nine of the former and six of the latter. Suppose, that the same kind of information is available on the use of inputs by firms located in region \\(s\\), \\(z^{rs}_{ij}\\) and \\(z^{ss}_{ij}\\). This complete table of intraregional and interregional data can be represented as\n\\[\\begin{equation}\n\\mathbf{Z = \\begin{bmatrix}\n      \\mathbf{Z^{rr}} & \\mathbf{Z^{rs}}\\\\\n      \\mathbf{Z^{sr}} & \\mathbf{Z^{ss}}\n      \\end{bmatrix} }\n\\end{equation}\\]\nThe columns of \\(\\mathbf{Z}\\) represent purchases of locally produced inputs and inputs from the other region, by firms in both regions. The rows of \\(\\mathbf{Z}\\) represent sales by firms to each sector in their region and how much they sold to sectors in the other region. Note, the off-diagonal matrices of explicit interregional linkages, \\(\\mathbf{Z^{rs}}\\) and \\(\\mathbf{Z^{sr}}\\), need not be square. The on-diagonal matrices of intraregional linkages, \\(\\mathbf{Z^{rr}}\\) and \\(\\mathbf{Z^{ss}}\\), are always square. The elements in \\(\\mathbf{Z^{rs}}\\) represent “exports” from region \\(r\\) and simultaneously “imports” to region \\(s\\), it is usual in regional input–output work to refer to these as interregional trade (or simply trade) flows and to use the terms export and import when dealing with foreign trade crossing national boundaries.\nIn the two-region interregional input–output model, the part of \\(f_{i}\\) that represents sales of sector \\(i\\)’s product to the productive sectors in the other region (but not to consumers in the other region) is removed from the final-demand category and specified explicitly. For our two-region example, the output of sector 1 in region \\(r\\) would be expressed as\n\\[x^{r}_{1} = z^{rr}_{11} + z^{rr}_{12} + z^{rr}_{13} + z^{rs}_{11} + z^{rs}_{12} + f^{r}_{1}\\]\nThe regional input coefficients for region \\(r\\) are the same as the single region intraregional specification\n\\[a^{rr}_{ij} = \\frac{z^{rr}_{ij}} {x^{r}_{j}}\\]\nAnd similarly for region \\(s\\) the regional input coefficients are\n\\[a^{ss}_{ij} = \\frac{z^{ss}_{ij}} {x^{s}_{j}}\\]\nThe interregional trade coefficients are found in the same manner, where the denominators are gross outputs of sectors in the receiving region.\n\n\\(a^{rs}_{ij} = \\frac{z^{rs}_{ij}} {x^{s}_{j}}\\) and \\(a^{sr}_{ij} = \\frac{z^{sr}_{ij}} {x^{r}_{j}}\\)\n\nUsing these regional input and trade coefficients, the output of sector 1 in region \\(r\\) can be re-expressed as\n\\[x^{r}_{1} = a^{rr}_{11}x^{r}_{1} + a^{rr}_{12}x^{r}_{2} + a^{rr}_{13}x^{r}_{3} + a^{rs}_{11}x^{s}_{1} + a^{rs}_{12}x^{s}_{2} + f^{r}_{1}\\] Note the regional input coefficients matrices are given by\n\\[\\mathbf{A^{rr}} = \\mathbf{Z^{rr}\\left(\\hat{x}^{r}\\right)^{-1}}\\]\n\\[\\mathbf{A^{rs}} = \\mathbf{Z^{rs}\\left(\\hat{x}^{s}\\right)^{-1}}\\]\n\\[\\mathbf{A^{sr}} = \\mathbf{Z^{sr}\\left(\\hat{x}^{r}\\right)^{-1}}\\]\n\\[\\mathbf{A^{ss}} = \\mathbf{Z^{ss}\\left(\\hat{x}^{s}\\right)^{-1}}\\]\nsuch that the final demand equation for each region can be expressed as\n\\[\\left(\\mathbf{I} - \\mathbf{A^{rr}}\\right)\\mathbf{x^{r}} - \\mathbf{A^{rs}x^{s}} = \\mathbf{f^{r}}\\]\n\\[-\\mathbf{A^{sr}x^{r}} + \\left(\\mathbf{I} - \\mathbf{A^{ss}}\\right)\\mathbf{x^{s}} = \\mathbf{f^{s}}\\]\nand the complete coefficients matrix for the two-region interregional model is defined as\n\\[\\begin{equation}\n\\mathbf{A = \\begin{bmatrix}\n          \\mathbf{A^{rr}} & \\mathbf{A^{rs}}\\\\\n          \\mathbf{A^{sr}} & \\mathbf{A^{ss}}\n          \\end{bmatrix}}\n\\end{equation}\\]\nUsing an interregional model of this kind for analysis, not only is stability of the (intra)regional input coefficients necessary (the elements of \\(\\mathbf{A^{rr}}\\) and \\(\\mathbf{A^{ss}}\\)), but also interregional input coefficients in \\(\\mathbf{A^{rs}}\\) and \\(\\mathbf{A^{sr}}\\) are assumed unvarying over time. Thus both the structure of production in each region and interregional trade patterns are “frozen” in this model.\nThe advantage is that the model captures the magnitude of effects on each sector in each region; interregional linkages are made specific by sector in the supplying region and by sector in the receiving region. The accompanying disadvantages are the increased data needs and the necessary assumption of interregional trading relationship constancy. It is not always easy to accept the idea of constant input coefficients, in the national input–output model, and it is even more difficult to believe that imports of good \\(i\\) per dollar’s worth of sector \\(j\\) output in a specific region remain constant, no matter how much sector \\(j\\)’s output changes.\nInterregional Feedback\nSuppose that \\(\\mathbf{x^{r}}\\), \\(\\mathbf{x^{s}}\\), \\(\\mathbf{f^{r}}\\), and \\(\\mathbf{f^{s}}\\) are marginal “changes” \\(\\Delta\\mathbf{x^{r}}\\), \\(\\Delta\\mathbf{x^{s}}\\), \\(\\Delta\\mathbf{f^{r}}\\), and \\(\\Delta\\mathbf{f^{s}}\\). And for simplicity assume \\(\\Delta\\mathbf{f^{s}} = 0\\) such that \\(\\mathbf{x^{s}}\\) is\n\\[\\mathbf{x^{s}} = \\left(\\mathbf{I} - \\mathbf{A^{ss}}\\right)^{-1} \\mathbf{A^{sr}x^{r}}\\] Solving for final demand in region \\(r\\) gives\n\\[\\left(\\mathbf{I} - \\mathbf{A^{rr}}\\right)\\mathbf{x^{r}} - \\mathbf{A^{rs}} \\left(\\mathbf{I} - \\mathbf{A^{ss}}\\right)^{-1} \\mathbf{A^{sr}x^{r}} = \\mathbf{f^{r}}\\] Note the same specification for the single region would be \\(\\left(\\mathbf{I} - \\mathbf{A^{rr}}\\right)\\mathbf{x^{r}} = \\mathbf{f^{r}}\\). The “extra” second term \\(\\mathbf{A^{rs}} \\left(\\mathbf{I} - \\mathbf{A^{ss}}\\right)^{-1} \\mathbf{A^{sr}x^{r}}\\) represents the added demands made on the output of region \\(r\\) because of interregional trade linkages: an interregional feedback term. The strength and importance of interregional linkages depend not only on the elements of the interregional input coefficients matrices \\(\\mathbf{-A^{rs}}\\) and \\(\\mathbf{A^{sr}}\\), but also on the full set of regional input coefficients in the other region, as represented by \\(\\left(\\mathbf{I} - \\mathbf{A^{ss}}\\right)^{-1}\\). It is these kinds of spatial linkages that distinguish complete interregional models from single-region models. In terms of outputs, the single- and two region models will generate \\(\\mathbf{x^{r}} = \\left(\\mathbf{I} - \\mathbf{A^{rr}}\\right)\\mathbf{f^{r}}\\) and \\(\\mathbf{x^{r}} = \\left(\\mathbf{I} - \\mathbf{A^{rr}} - \\mathbf{A^{rs}L^{ss}A^{sr}}\\right)\\mathbf{f^{r}}\\), respectively. Clearly, the interregional input–output model requires a large amount of detailed data. For this reason, there have been few real-world applications.\nMRIO Model - The Multiregional Approach to IRIO\nGenerally it is impossible to implement IRIO for many regions and/or sectors because of the enormous amounts of data that it requires. One attempt toward operationalization through simplification is the “Chenery–Moses” or MRIO approach.\nThe MRIO model uses a regional technical coefficients matrix, \\(\\mathbf{A^{r}}\\), in place of the regional input coefficients matrix, \\(\\mathbf{A^{rr}}\\). These regional technical coefficients, \\(a^{r}_{ij}\\), can be produced from responses to the question “How much sector \\(i\\) product did you buy last year in making your output?” Information regarding the region of origin of a given input is ignored; one only needs information on the dollars’ worth of input from sector \\(i\\) used by sector \\(j\\) in region \\(r\\). These transactions are denoted by \\(z^{\\cdot r}_{ij}\\), where the dot indicates that all possible geographical locations for sector \\(i\\) are lumped together. These coefficients are defined as \\(a^{r}_{ij} = \\frac{z^{\\cdot r}_{ij}}{x^{r}_{j}}\\) and \\(\\mathbf{A^{r}} = \\left[ a^{r}_{ij} \\right]\\).\nIn practice, when actual regional data on technology are not available, estimates of regional technical coefficients matrices are made using what is known as the product-mix approach. The basic assumption is that input requirements per unit of output are constant from region to region at a very fine level of industrial classification, but that an important distinguishing characteristic of production at the regional level is the composition of sector outputs, when one is dealing with more aggregate sectors.\nThe Interregional Tables\nThe interconnections among regions in the multiregional input–output model are captured in an entirely different way from the interregional input–output framework. Trade flows in the multiregional model are estimated by sector, again to take advantage of the kinds of data likely to be available. For sector \\(i\\), let \\(z^{rs}_{i}\\) denote the dollar flow of good \\(i\\) from region \\(r\\) to region \\(s\\), irrespective of the sector of destination in the receiving region. These flows will include shipments to the producing sectors in region \\(s\\) as well as to final demand in \\(s\\).\n\\[\\begin{equation}\n\\begin{matrix}\n&  & 1 & 2 & \\dots & s & \\dots & p \\\\\n\\hline\n1 & & z^{11}_{i} & z^{12}_{i} & \\dots & z^{1s}_{i} & \\dots & z^{1p}_{i} \\\\\n2 & & z^{21}_{i} & z^{22}_{i} & \\dots & z^{2s}_{i} & \\dots & z^{2p}_{i} \\\\\n\\vdots & & \\vdots & \\vdots & \\dots & \\vdots & \\dots & \\vdots \\\\\nr & & z^{r1}_{i} & z^{r2}_{i} & \\dots & z^{rs}_{i} & \\dots & z^{rp}_{i} \\\\\n\\vdots & & \\vdots & \\vdots &  & \\vdots &   & \\vdots \\\\\np & & z^{p1}_{i} & z^{p2}_{i} & \\dots & z^{ps}_{i} & \\dots & z^{pp}_{i} \\\\\nTotal & & T^{1}_{i} & T^{2}_{i} & \\dots & T^{s}_{i} & \\dots & T^{p}_{i} \\\\\n\\hline\n\\end{matrix}\n\\end{equation}\\]\nNote that each of the column sums in this table represents the total shipments of good \\(i\\) into that region from all of the regions in the model; this total, for column \\(s\\), is denoted in the table for good \\(i\\) by \\(T^{s}_{i}\\):\n\\[T^{s}_{i} = z^{1s}_{i} + z^{2s}_{i} + \\dots + z^{rs}_{i} + \\dots + z^{ps}_{i}\\]\nIf each element in column \\(s\\) is divided by this total, one has coefficients denoting the proportion of all of good \\(i\\) used in \\(s\\) that comes from each region \\(r \\; \\left(r = 1, \\dots, p \\right)\\). These proportions are denoted \\(c^{rs}_{i}\\):\n\\[c^{rs}_{i} = \\frac{z^{rs}_{i}}{T^{s}_{i}}\\]\nFor each possible origin destination pair of regions, denote the n-element column vector:\n\\[\\begin{equation}\n\\mathbf{c^{rs}} =\n  \\begin{bmatrix}\n  c^{rs}_{1} \\\\\n  \\vdots \\\\\n  c^{rs}_{n} \\\\\n  \\end{bmatrix}\n\\end{equation}\\]\nThese elements show, for region \\(s\\), the proportion of the total amount of each good used in \\(s\\) that comes from region \\(r\\). Note that there will be intraregional matrices in this set. For example, \\(\\mathbf{\\hat{c}^{ss}}\\) whose elements, \\(c^{ss}_{i} = \\frac{z^{ss}_{i}}{T^{s}_{i}}\\), indicate the proportion of good \\(i\\) used in region \\(s\\) that came from within region \\(s\\).\nThe Multiregional Model\nConsider a small two-sector, two-region example, where\n\\[\\begin{equation}\n\\mathbf{A^{r}} =\n  \\begin{bmatrix}\n  a^{r}_{11} & a^{r}_{11} \\\\\n  a^{r}_{21} & a^{r}_{22} \\\\\n  \\end{bmatrix}, \\; \\;\n  \\mathbf{A^{s}} =\n  \\begin{bmatrix}\n  a^{s}_{11} & a^{s}_{11} \\\\\n  a^{s}_{21} & a^{s}_{22} \\\\\n  \\end{bmatrix}\n\\end{equation}\\]\n\\[\\begin{equation}\n\\mathbf{\\hat{c}^{rs}} =\n  \\begin{bmatrix}\n  c^{rs}_{1} & 0 \\\\\n  0 & c^{rs}_{2} \\\\\n  \\end{bmatrix}, \\; \\;\n  \\mathbf{\\hat{c}^{ss}} =\n  \\begin{bmatrix}\n  c^{ss}_{1} & 0 \\\\\n  0 & c^{ss}_{2} \\\\\n  \\end{bmatrix}\n\\end{equation}\\]\nThen the multiregional input–output model uses the matrix\n\\[\\begin{equation}\n\\mathbf{\\hat{c}^{rs}A^{s}} =\n  \\begin{bmatrix}\n  c^{rs}_{1}a^{s}_{11} & c^{rs}_{1}a^{s}_{11} \\\\\n  c^{rs}_{2}a^{s}_{21} & c^{rs}_{2}a^{s}_{22} \\\\\n  \\end{bmatrix}\n\\end{equation}\\]\nas an estimate of \\(\\mathbf{A^{rs}}\\) in the interregional input–output model. Similarly,\n\\[\\begin{equation}\n\\mathbf{\\hat{c}^{ss}A^{s}} =\n  \\begin{bmatrix}\n  c^{ss}_{1}a^{s}_{11} & c^{ss}_{1}a^{s}_{11} \\\\\n  c^{ss}_{2}a^{s}_{21} & c^{ss}_{2}a^{s}_{22} \\\\\n  \\end{bmatrix}\n\\end{equation}\\]\nas an estimate of \\(\\mathbf{A^{ss}}\\) in the interregional input–output model. Therefore the multiregional input–output model embodies the same assumptions as regional models with estimated supply percentages.\nThe multiregional input–output counterpart to the interregional model is therefore\n\\[\\left(\\mathbf{I} - \\mathbf{\\hat{c}^{rr}A^{r}}\\right)\\mathbf{x^{r}} - \\mathbf{\\hat{c}^{rs}A^{s}x^{s}} = \\mathbf{\\hat{c}^{rr}f^{r}} + \\mathbf{\\hat{c}^{rs}f^{s}}\\]\n\\[ -\\mathbf{\\hat{c}^{sr}A^{r}x^{r}} \\left(\\mathbf{I} - \\mathbf{\\hat{c}^{ss}A^{s}}\\right)\\mathbf{x^{s}} = \\mathbf{\\hat{c}^{rs}f^{r}} + \\mathbf{\\hat{c}^{ss}f^{s}}\\]\nOr in matrix notation as\n\\[\\left(\\mathbf{I} - \\mathbf{CA}\\right)\\mathbf{x} = \\mathbf{Cf}\\]\nLet\n\\[\\begin{equation}\n\\mathbf{A} =\n  \\begin{bmatrix}\n    \\mathbf{A^{r}} & 0 \\\\\n    0 & \\mathbf{A^{s}} \\\\\n  \\end{bmatrix}, \\; \\;\n\\mathbf{C} =\n  \\begin{bmatrix}\n    \\mathbf{\\hat{c}^{rr}} & \\mathbf{\\hat{c}^{rs}} \\\\\n    \\mathbf{\\hat{c}^{sr}} & \\mathbf{\\hat{c}^{ss}} \\\\\n    \\end{bmatrix}, \\; \\;\n  \\mathbf{x} =\n    \\begin{bmatrix}\n      \\mathbf{x^{r}} \\\\\n      \\mathbf{x^{s}} \\\\\n    \\end{bmatrix}, \\;  \\text{ and} \\; \\;\n  \\mathbf{f} =\n    \\begin{bmatrix}\n      \\mathbf{f^{r}} \\\\\n      \\mathbf{f^{s}} \\\\\n  \\end{bmatrix}\n\\end{equation}\\]\nGiving the solution as\n\\[\\mathbf{x} = \\left(\\mathbf{I} - \\mathbf{CA}\\right)^{-1} \\mathbf{Cf}\\]\nSimilarly, when there are \\(p\\) regions, let\n\\[\\begin{equation}\n\\mathbf{A} =\n  \\begin{bmatrix}\n      \\mathbf{A^{1}} & 0 & \\dots &  0 \\\\\n      0 & \\mathbf{A^{2}} & \\dots &  0 \\\\\n      \\vdots & \\vdots & \\ddots &  \\vdots \\\\\n      0 & 0 & \\dots & \\mathbf{A^{p}} \\\\\n  \\end{bmatrix}, \\; \\;\n\\mathbf{c} =\n  \\begin{bmatrix}\n      \\mathbf{\\hat{c}^{11}} & \\dots &  \\mathbf{\\hat{c}^{1p}} \\\\\n      \\mathbf{\\hat{c}^{21}} & \\dots &  \\mathbf{\\hat{c}^{2p}} \\\\\n      \\vdots & \\ddots &  \\vdots \\\\\n      \\mathbf{\\hat{c}^{p1}} & \\dots &  \\mathbf{\\hat{c}^{pp}} \\\\\n  \\end{bmatrix}, \\; \\;\n  \\mathbf{x} =\n    \\begin{bmatrix}\n      \\mathbf{x^{1}} \\\\\n      \\mathbf{x^{2}} \\\\\n      \\vdots \\\\\n      \\mathbf{x^{p}} \\\\\n    \\end{bmatrix}, \\; \\text{ and} \\; \\;\n  \\mathbf{f} =\n    \\begin{bmatrix}\n      \\mathbf{f^{1}} \\\\\n      \\mathbf{f^{2}} \\\\\n      \\vdots \\\\\n      \\mathbf{f^{p}} \\\\\n  \\end{bmatrix}\n\\end{equation}\\]\nIn this way \\(\\left(\\mathbf{I} - \\mathbf{CA}\\right)\\mathbf{x} = \\mathbf{Cf}\\) and \\(\\mathbf{x} = \\left(\\mathbf{I} - \\mathbf{CA}\\right)^{-1} \\mathbf{Cf}\\) still still represents the system and its solution.\nFrom the general statement of the multiregional input–output model both intermediate demands, \\(\\mathbf{Ax}\\), and final demand, \\(\\mathbf{f}\\), are premultiplied by the matrix \\(\\mathbf{C}\\); this distributes these demands to supplying sectors across regions. Thus \\(\\mathbf{f^{r}}\\) and \\(\\mathbf{f^{s}}\\) represent demands by (shipments to) the final-demand sectors in regions \\(r\\) and \\(s\\) respectively, not final demands for the products of regions \\(r\\) and \\(s\\) (as in the interregional input–output model).\n\n\nNonsurvey methods\nRegional input–output tables share with their national counterparts the problem of becoming outdated with the simple passage of time. But smaller geographic scale introduces other problems. When one is concerned with models in which two or more regions are connected (or a single region and the rest of the country) shipments out of and into the regions assume a much more important role – the former providing inputs to production and the latter representing markets for outputs. One procedure for obtaining this estimate for sector \\(i\\) was to find the ratio of total regional output, less exports, of sector \\(i\\), to the total output, less exports, plus imports, of sector \\(i\\) given by\n\\[p^{r}_{i} = \\frac{x^{r}_{i} - e^{r}_{i}}{x^{r}_{i} - e^{r}_{i} + m^{r}_{i}}\\]\nThus, when none of good \\(i\\) is imported, \\(p^{r}_{i} = 1\\), and the assumption is that all of the region’s needs for \\(i\\) can be supplied internally. The regional input coefficient matrix is derived from \\(\\mathbf{A^{rr} = \\hat{p}A^{n}}\\) where \\(\\mathbf{p} = [p^{r}_{i}]\\) and \\(\\mathbf{A^{n}}\\) is the national technical coefficients matrix.\nA regional input coefficient, \\(a^{rr}_{ij}\\), is defined as the difference between a regional technical coefficient, \\(a^{r}_{ij}\\), and a regional import coefficient, \\(a^{sr}_{ij}\\), where \\(s\\) indicates “outside of \\(r\\).” If a complete set of intra- and interregional data is available, then the \\(a^{rr}_{ij}\\)’s (and \\(a^{sr}_{ij}\\)’s) are observable directly. However, if one is trying to estimate \\(a^{rr}_{ij}\\) from national data, as is the case, the estimation problem can be posed in the following way: (1) estimate a regional technical coefficient, \\(a^{r}_{ij}\\), from the corresponding national coefficient, \\(a^{n}_{ij}\\), and then (2) estimate the regional input coefficient, \\(a^{rr}_{ij}\\), as some proportion of the regional technical coefficient; that is, \\(a^{rr}_{ij} = p^{r}_{ij}a^{r}_{ij}\\) (where \\(0 \\leq p^{r}_{ij} \\leq 1\\)).\nInstead of estimating, \\(a^{r}_{ij}\\) and \\(a^{sr}_{ij}\\) one estimates \\(a^{r}_{ij}\\) and \\(p^{r}_{ij}\\). The two steps in this procedure for estimating \\(a^{rr}_{ij}\\) from \\(a^{n}_{ij}\\) would therefore be:\n\nfind \\(\\alpha^{r}_{ij} \\geq 0\\) such that\n\n\\[a^{r}_{ij} = (\\alpha^{r}_{ij}) (a^{n}_{ij})\\]\nand\n\nfind \\(\\beta^{r}_{ij}\\) (\\(0 \\leq \\beta^{r}_{ij} \\leq 1\\)) such that\n\n\\[a^{rr}_{ij} = (\\beta^{r}_{ij}) (a^{r}_{ij})\\].\nIf one can find \\(\\alpha^{r}_{ij}\\) and \\(\\beta^{r}_{ij}\\) for every \\(i\\) and \\(j\\), this is equivalent to finding\n\\[a^{rr}_{ij} = (\\gamma^{r}_{ij}) (a^{n}_{ij})\\] where\n\\[\\gamma^{r}_{ij} = (\\alpha^{r}_{ij}) (\\beta^{r}_{ij})\\]\nHowever, in general there is not enough regional information to find \\(\\alpha^{r}_{ij}\\) and \\(\\beta^{r}_{ij}\\).\nAssuming region \\(r\\) and national production recipes are identical, \\(a^{r}_{ij} \\equiv a^{n}_{ij}\\), results in \\(\\alpha^{r}_{ij} = 1\\) for all \\(i\\) and \\(j\\). This assumption overlooks probable regional differences in product mixes within a sector. Or assuming each regional purchaser, \\(j\\), of input \\(i\\) buys the same proportion of those inputs from within the region, results in \\(\\beta^{r}_{ij} = p^{r}_{i}\\) for all \\(i\\). In the absence of specific survey information, it is customary, at least initially, to invoke one or more these assumptions. A number of nonsurvey techniques exist for regionalization of national coefficients – through adjustments based only on published information on regional employment, income, or output by industry.\nSimple Location Quotients\nLet \\(x^{r}_{i}\\) and \\(x^{r}\\) denote gross output of sector \\(i\\) in region \\(r\\) and total output of all sectors in region \\(r\\), respectively, and let \\(x^{n}_{i}\\) and \\(x^{n}\\) denote these totals at the national level. Then the simple location quotient for sector \\(i\\) in region \\(r\\) is defined as:\n\\[LQ^{r}_{i} = \\left( \\frac{x^{r}_{i} / x^{r}} {x^{n}_{i} / x^{n}} \\right) = \\left( \\frac{x^{r}_{i} / x^{n}_{i}} {x^{r} / x^{n}} \\right)\\]\nThe simple location quotient is a measure of the ability of regional industry \\(i\\) to supply the demands placed upon it by other industries (and by final demand) in that region. Also denoted as \\(SLQ_{i}\\).\nIf industry \\(i\\) is less concentrated in the region than in the nation (\\(LQ^{r}_{i} < 1\\)), it is seen as less capable of satisfying regional demand for its output, and its regional direct input coefficients, \\(a^{rr}_{ij}\\) (\\(j = 1, \\dots, n\\)) are created by reducing the national coefficients, \\(a^{n}_{ij}\\), by multiplying them by \\(LQ^{r}_{i}\\). However, if industry \\(i\\) is more highly concentrated in the region than in the nation (\\(LQ^{r}_{i} > 1\\)), then it is assumed that the national input coefficients from industry \\(i\\), \\(a^{n}_{ij}\\) (\\(j = 1, \\dots, n\\)) apply to the region, and the regional “surplus” produced by \\(i\\) will be exported to the rest of the nation. If a national sector is not present in the region (\\(LQ^{r}_{i} = 0\\)), that row and column are simply deleted from \\(\\mathbf{A^{n}}\\). Thus, for each row \\(i\\) of an estimated regional table,\n\\[\na^{rr}_{ij} = \\left\\{\n\\begin{align*}\n(LQ^{r}_{i})a^{n}_{ij} \\space\\space \\text{if} \\space\\space LQ^{r}_{i} < 1 \\\\\na^{n}_{ij} \\space\\space \\text{if} \\space\\space LQ^{r}_{i} \\geq 1\n\\end{align*}\n\\right\\}\n\\]\nThis procedure is equivalent to assuming \\(\\alpha^{r}_{ij} = 1\\) for all \\(i\\) and \\(j\\) and letting \\(\\beta^{r}_{ij} = LQ^{r}_{i}\\) when \\(LQ^{r}_{i} < 1\\) and \\(\\beta^{r}_{ij} = 1\\) when \\(LQ^{r}_{i} \\geq 1\\). Note ttha this approach does have a distinct asymmetry. When a sector is import-oriented (\\(LQ^{r}_{i} < 1\\)), the modification of the national coefficient varies with the strength of the import orientation \\(a^{rr}_{ij} = (LQ^{r}_{i})a^{n}_{ij}\\), but when a sector is export-oriented (\\(LQ^{r}_{i} > 1\\)), the strength of that orientation is not reflected in the modification \\(a^{rr}_{ij} = (1)a^{n}_{ij}\\).\nA complication may arise if the estimates of regional industry output that are obtained using LQ coefficients exceed actual output for some industries. In this event, coefficients developed by this method have often been “balanced” to ensure that they do not overestimate the regional output of each sector. If estimated coefficients generate a regional output for sector \\(i\\), \\((\\tilde{x}_{i})\\) that is too large (meaning \\(\\tilde{x}^{r}_{i} > x^{r}_{i}\\) ), then the row-\\(i\\) estimates, \\(a^{rr}_{ij}\\) (for all \\(j\\)), should be uniformly reduced – multiplied by (\\(x^{r}_{i} / \\tilde{x}^{r}_{i}\\)).\nFor example, estimated sector \\(i\\) output on the basis of actual regional industry outputs, and the LQ-estimated regional input coefficients for sector \\(i\\)\n\\[\\tilde{x}^{r}_{i} = \\sum_{j}a^{rr}_{ij}x^{r}_{j} + \\sum_{f}c^{rr}_{if}f^{r}_{f}\\]\nwhere\n\\(\\tilde{x}^{r}_{i}\\) is estimated regional output of sector \\(i\\),\n\\(f^{r}_{f}\\) is total regional final demand of final-demand sector \\(f\\), and\n\\(c^{rr}_{if}\\) is estimated regional final-demand purchase coefficient of regional final-demand sector \\(f\\) from industry \\(i\\).\nThe \\(c^{rr}_{if}\\) elements reflect purchases of regionally produced output \\(i\\) by regional final-demand sector \\(f\\). These estimates are found in much the same manner as were the \\(a^{rr}_{ij}\\); that is, using national data and the region-specific location quotients. In particular,\n\\[\nc^{rr}_{if} = \\left\\{\n\\begin{align*}\n(LQ^{r}_{i})c^{n}_{if} \\space\\space \\text{if} \\space\\space LQ^{r}_{i} < 1 \\\\\nc^{n}_{if} \\space\\space \\text{if} \\space\\space LQ^{r}_{i} \\geq 1\n\\end{align*}\n\\right\\}\n\\]\nwhere\n\\[c^{n}_{if} = f_{if} / f_{f}\\]\n\\(f_{if}\\) is national sales of industry \\(i\\) to final-demand sector \\(f\\), and\n\\(f_{f}\\) is total national purchases of final-demand sector \\(f\\).\nThus, when \\(LQ^{r}_{i} \\geq 1\\), it is assumed that purchases of good \\(i\\) by final-demand sector \\(f\\) are the same proportion of total sector \\(f\\) purchases in the region as in the nation. When $ LQ^{r}_{i} < 1$, then the national proportion is modified downward.\nThe next step in the balancing procedure is to calculate the ratio of estimated to actual regional output; denote this by \\(Z^{r}_{i}\\). Then\n\\[Z^{r}_{i} = x^{r}_{i} / \\tilde{x}^{r}_{i}\\]\nEach row of estimated regional input coefficients for which \\(Z^{r}_{i}\\) is less than one is adjusted downward. That is, adjusted (“balanced”) regional input coefficients are estimated as\n\\[\n\\bar{a}^{rr}_{ij} = \\left\\{\n\\begin{align*}\nZ^{r}_{i}a^{rr}_{ij} \\space\\space \\text{if} \\space\\space Z^{r}_{i} < 1 \\\\\na^{rr}_{ij} \\space\\space \\text{if} \\space\\space Z^{r}_{i} \\geq 1\n\\end{align*}\n\\right\\}\n\\]\nNote, in this LQ and all other quotient approaches, \\(\\alpha^{r}_{ij} = 1\\) is assumed. And with high disaggregation, the assumption of constant (national) technology across regions may be reasonable.\nPurchases-Only Location Quotients\nThe purchases-only location quotient (PLQ) for sector \\(i\\) in region \\(r\\) relates regional to national ability to supply sector \\(i\\) inputs, but only to those sectors that use \\(i\\) as an input. That is,\n\\[PLQ^{r}_{i} = \\left( \\frac{x^{r}_{i} / x^{*r}} {x^{n}_{i} / x^{*n}} \\right) \\]\nwhere \\(x^{r}_{i}\\) and \\(x^{n}_{i}\\) are regional and national output of good \\(i\\), as before, and where \\(x^{*r}\\) and \\(x^{*n}\\) are total regional and national output of only those sectors that use \\(i\\) as an input. If input \\(i\\) is not used by sector \\(k\\), then the size of sector \\(k\\)’s output is not relevant in determining whether or not the region can supply all of its needs for input \\(i\\).\nCross-Industry Quotients\nAnother variant is the cross-industry quotient (CIQ). This allows for differing modifiers within a given row of the national matrix; that is, it allows for differing cell-by-cell adjustments within \\(\\mathbf{A^{n}}\\) rather than uniform adjustments along each row. Specifically,\n\\[CIQ^{r}_{ij} = \\left( \\frac{x^{r}_{i} / x^{n}_{i}} {x^{r}_{j} / x^{n}_{j}} \\right)\\]\nThen\n\\[\na^{rr}_{ij} = \\left\\{\n\\begin{align*}\n(CIQ^{r}_{ij})a^{n}_{ij} \\space\\space \\text{if} \\space\\space CIQ^{r}_{ij} < 1 \\\\\na^{n}_{ij} \\space\\space \\text{if} \\space\\space CIQ^{r}_{ij} \\geq 1\n\\end{align*}\n\\right\\}\n\\]\nIf the output of regional sector \\(i\\) relative to the national output of \\(i\\) is larger than the output of regional sector \\(j\\) relative to the national output of sector \\(j\\) (\\(CIQ^{r}_{ij} > 1\\)), then all of \\(j\\)’s needs of input \\(i\\) can be supplied from within the region. Similarly, if sector \\(i\\) at the regional level is relatively smaller than sector \\(j\\) at the regional level (\\(CIQ^{r}_{ij} < 1\\)), then it is assumed that some of \\(j\\)’s needs for \\(i\\) inputs will have to be imported. Note that \\(CIQ^{r}_{ij} = LQ^{r}_{i}/LQ^{r}_{j}\\) and that \\(CIQ^{r}_{ij} = 1\\) (along the main diagonal, when \\(i=j\\)).\nThe Semilogarithmic Quotient\nSince the LQ approach will never increase a national coefficient (they are either left unchanged or made smaller), this procedure is also called reducing the national coefficients table. This \\(a^{rr}_{ij} \\leq a^{n}_{ij}\\) characteristic of the LQ approach has also been called into question. A producer in sector \\(j\\) might use relatively fewer imported inputs than is reflected in the national coefficients for sector \\(j\\), and thus at least some regionally supplied inputs could be larger, per unit of output \\(j\\) in that region than in the nation as a whole. And in general, if the national coefficient is an average of observed regional coefficients, then some coefficients in some regions should be expected to be above average while others in other regions would necessarily be below average.\nLet a “semilogarithmic quotient (SLQ)” be defined as\n\\[SLQ^{r}_{ij} = LQ^{r}_{i}/ \\log_{2} (1 + LQ^{r}_{j})\\] Or alternatively as\n\\[SLQ^{r}_{ij} = [(x^{r}_{i} / x^{n}_{i}) \\div (x^{r} / x^{n})]/ \\log_{2}\\{1 + [(x^{r}_{j} / x^{n}_{j}) \\div (x^{r} / x^{n})] \\}\\] along with relative sizes of both industries, \\(i\\) and \\(j\\), this includes the regional size component in both numerator and denominator but not in such a way that the terms cancel out.\nFlegg\nThe Flegg Location Quotient measure is generated by modifying the \\(CIQ^{r}_{ij}\\) to incorporate an additional measure of the relative size of the region,\n\\[FLQ^{r}_{ij} = (\\lambda)CIQ^{r}_{ij}\\] where \\(\\lambda = \\{\\log_{2}[1 + (x^{r}_{E} / x^{n}_{E})]\\}^{\\delta}\\), \\(0 \\leq \\delta < 1\\). Then\n\\[\na^{rr}_{ij} = \\left\\{\n\\begin{align*}\n(FLQ^{r}_{ij})a^{n}_{ij} \\space\\space \\text{if} \\space\\space FLQ^{r}_{ij} < 1 \\\\\na^{n}_{ij} \\space\\space \\text{if} \\space\\space FLQ^{r}_{ij} \\geq 1\n\\end{align*}\n\\right\\}\n\\]\nFlegg uses employment rather than output as the relevant measures of regional and national activity; these are \\(x^{r}_{E}\\) and \\(x^{n}_{E}\\) for the region and the nation, respectively, so \\(x^{r}_{E} / x^{n}_{E}\\) provides an alternative to the output ratio (\\(x^{r} / x^{n}\\)) as a measure of relative regional size. It also uses employment as the measure of sector \\(i\\) and \\(j\\) activity (output). The idea is to reduce national coefficients less for larger regions – on the belief that larger regions import less than smaller ones. The problem, however, is that one must specify a value of \\(\\delta\\) in advance, and it is not at all clear what this value (or range of values) should be. Empirical work has suggested that \\(\\delta = 0.3\\) seems to work well in a variety of situations.\nSpecialization might lead to increased intraregional purchases (by the specialized industry) and hence to intraregional input coefficients that are larger than their national counterparts. A variant of the FLQ can reflect this regional specialization. The Augmented Flegg Location Quotient (AFLQ) is given by\n\\[\nAFLQ^{r}_{ij} = \\left\\{\n\\begin{align*}\n[\\log_{2}(1 + LQ^{r}_{ij})]FLQ^{r}_{ij} \\space\\space \\text{if} \\space\\space LQ^{r}_{ij} > 1 \\\\\nFLQ^{r}_{ij} \\space\\space \\text{if} \\space\\space LQ^{r}_{ij} \\leq 1\n\\end{align*}\n\\right\\}\n\\]\nsuch that\n\\[\na^{rr}_{ij} = \\left\\{\n\\begin{align*}\n(AFLQ^{r}_{ij})a^{n}_{ij} \\space\\space \\text{if} \\space\\space LQ^{r}_{ij} > 1 \\\\\n(FLQ^{r}_{ij})a^{n}_{ij} \\space\\space \\text{if} \\space\\space LQ^{r}_{ij} \\leq 1\n\\end{align*}\n\\right\\}\n\\]\nNow FLQ is increased in those cases (only) in which sector \\(j\\) is relatively specialized in region \\(r\\) (when \\(LQ^{r}_{ij} > 1\\), so \\([\\log_{2}(1 + LQ^{r}_{ij})]\\)). Thus far national coefficients could never be increased by any of the quotient techniques examined. The argument is that a large industry (\\(j\\)) in a particular region may attract in-movement to the region of firms in other sectors that supply \\(j\\); hence \\(j\\)’s intraregional input purchases may be larger than the national coefficient would suggest.\nSupply–Demand Pool Approaches\nThe supply–demand pool (SDP) technique estimates regional from national coefficients in much the same way as the procedure that was used to balance the regional coefficients estimated by the simple location quotient technique. National technical coefficients are taken as the first approximation to regional coefficients. Regional output by sector is then found, as above, by multiplying each of these coefficients by the appropriate actual regional output of that sector (and similarly for final-demand sectors, but using the national final-demand input proportions, \\(c^{n}_{if}\\)) and summing:\n\\[\\tilde{x}^{r}_{i} = \\sum_{j}a^{n}_{ij}x^{r}_{j} + \\sum_{f}c^{n}_{if}f^{r}_{f}\\]\nThen the regional commodity balance, \\(b^{r}_{i}\\), is calculated for industry \\(i\\) as \\(b^{r}_{i} = x^{r}_{i} - \\tilde{x}^{r}_{i}\\). If this balance is positive, using national coefficients as estimates of regional coefficients does not generate an overestimate of regional production and so \\(a^{rr}_{ij} = a^{n}_{ij}\\) and \\(c^{rr}_{if} = c^{n}_{if}\\) are acceptable estimates. However, if the balance is negative, national coefficients are too large, in the sense that they generate unrealistically high regional outputs, by sector, so \\(a^{rr}_{ij} = a^{n}_{ij}(x^{r}_{i} / \\tilde{x}^{r}_{i})\\) and \\(c^{rr}_{if} = c^{n}_{if}(x^{r}_{i} / \\tilde{x}^{r}_{i})\\) – the national coefficients are reduced by the amount necessary to make the regional balance for that sector exactly zero.\n\\[\na^{rr}_{ij} = \\left\\{\n\\begin{align*}\n(x^{r}_{i} / \\tilde{x}^{r}_{i})a^{n}_{ij} \\space\\space \\text{if} \\space\\space b^{r}_{i} < 0 \\\\\na^{n}_{ij} \\space\\space \\text{if} \\space\\space b^{r}_{i} \\geq 0\n\\end{align*}\n\\right\\}\n\\]\nthe supply-demand pool technique assumes that \\(\\alpha^{r}_{ij} = 1\\), as do all of the quotient techniques mentioned above. Further, \\(\\beta^{r}_{ij} = (x^{r}_{i} / \\tilde{x}^{r}_{i})\\) when \\(x^{r}_{i} - \\tilde{x}^{r}_{i} < 0\\) and \\(\\beta^{r}_{ij} = 1\\) when \\(x^{r}_{i} - \\tilde{x}^{r}_{i} \\geq 0\\). As with the LQ-based techniques, only reductions of national coefficients are possible and cross-hauling is not captured.\nRegional Purchase Coefficients\nThe regional supply proportions, \\(p^{r}_{i}\\) have also been defined as regional purchase coefficients (RPCs). These coeffecients operate uniformly across rows, as do LQ-based methods, similarly assume \\(\\alpha^{r}_{ij} = 1\\), and \\(\\beta^{r}_{ij} = p^{r}_{i} = RPC^{r}_{i}\\). The regional purchase coefficient for a sector is defined as the proportion of regional demand for that sector’s output that is fulfilled from regional production. Formally, for region \\(r\\) and good \\(i\\),\n\\[RPC^{r}_{i} = z^{rr}_{i} / (z^{rr}_{i} + z^{sr}_{i})\\]\nVarious relationships between \\(RPC^{r}_{i}\\) and proxies for these relative terms have been proposed and fitted by regression techniques to data that are available in US published sources such as County Business Patterns, Census of Transportation, and Census of Manufactures, as well as a national input–output technical coefficients table. An alternative approach to estimation of RPCs are gravity models of commodity flows.\nRegional RAS\nA traditional RAS is concerned with adjusting coefficient matrices across time (the updating problem), however, it may also be used to adjust coefficient matrices across space (the regionalization problem). Therefore, one can perform a regional RAS to estimate \\(\\mathbf{A^{r}}\\), given a national input–output table, \\(\\mathbf{A^{n}}\\), and current marginal information about regional economic activity – regional total gross outputs, \\(\\mathbf{x^{r}}\\), regional total interindustry (intermediate) sales, \\(\\mathbf{u^{r}}\\), and regional total interindustry purchases \\(\\mathbf{v^{r}}\\).\nUnlike the many other clean I/O accounting procedures, RAS is an iterative maximization process. Step 1 is to assume \\(\\mathbf{A^{r}} = \\mathbf{A^{r}}\\) such that \\(\\mathbf{Z^{0}} = \\mathbf{A^{n}\\hat{x}^{r}}\\), where zero superscript denotes the base or zeroth iteration.\nStep 2 is to then ask: Does \\(\\mathbf{Z^{0}i} = \\mathbf{u^{r}}\\) and \\(\\mathbf{iZ^{0}} = \\mathbf{v^{r}}\\)? If the answer is yes to both, then \\(\\mathbf{Z^{0}} = \\mathbf{Z^{r}}\\) and \\(\\mathbf{A^{n}} = \\mathbf{A^{r}}\\). If the answer is no to either, then we update the direct requirements matrix. First by \\(\\mathbf{A^{1}} = \\mathbf{\\hat{r}^{1}A^{n}}\\), where \\(\\mathbf{\\hat{r}^{1}} = [\\mathbf{\\hat{u}^{r}}](\\mathbf{\\hat{Z}^{0}i})^{-1}\\). And by definition, now \\(\\mathbf{u^{r}} = \\mathbf{Z^{1}i} = [\\mathbf{\\hat{r}^{1}A^{n}\\hat{x}^{r}}]\\mathbf{i}\\).\nStep 3 is to then ask: Does \\(\\mathbf{iZ^{1}} = \\mathbf{v^{r}}\\)? If the answer is yes, then \\(\\mathbf{Z^{1}} = \\mathbf{Z^{r}}\\) and \\(\\mathbf{Z^{1}\\hat{x}^{r}} = \\mathbf{A^{r}}\\). If the answer is no, then iterate again, this time let \\(\\mathbf{A^{2}} = \\mathbf{A^{1}\\hat{s}^{1}}\\), where \\(\\mathbf{\\hat{s}^{1}} = [\\mathbf{\\hat{v}^{r}}](\\mathbf{iZ^{1}})^{-1}\\). And by definition, now \\(\\mathbf{\\hat{v}^{r}} = (\\mathbf{Z^{2}})'\\mathbf{i} = [\\mathbf{A^{2}\\hat{x}^{r}}]'\\mathbf{i}\\).\nNote that \\(\\mathbf{A^{2}} = \\mathbf{\\hat{r}^{1}A^{n}\\hat{s}^{1}}\\), and similarly for \\(t\\) repetitions of this procedures \\(\\mathbf{A^{2t}} = [\\mathbf{\\hat{r}^{t}\\cdots\\hat{r}^{1}}]\\mathbf{A^{n}}[\\mathbf{\\hat{s}^{1}\\cdots\\hat{s}^{t}}]\\). Let \\(\\mathbf{\\hat{r}} = [\\mathbf{\\hat{r}^{t}\\cdots\\hat{r}^{1}}]\\) and \\(\\mathbf{\\hat{s}} = [\\mathbf{\\hat{s}^{1}\\cdots\\hat{s}^{t}}]\\), thus \\(\\mathbf{\\hat{r}A\\hat{s}}\\) and the name of the “RAS” procedure is reveled.\nLastly, one must specify a value \\(\\epsilon\\) such that \\([|\\mathbf{u^{r}} - \\mathbf{u^{t}}|]\\) and \\([|\\mathbf{v^{r}} - \\mathbf{v^{t}}|]\\) are no more than \\(\\epsilon\\) and the iterative balancing may cease.\nGravity Model Formulations\nMany versions of gravity model formulations have been proposed and explored for estimating commodity flows between regions. The basic idea is that the flow of good \\(i\\) from region \\(r\\) to region \\(s\\) can be looked upon as a function of (1) some measure of the total output of \\(i\\) in \\(r\\), \\(x^{r}_{i}\\), (2) some measure of the total purchases of \\(i\\) in \\(s\\), \\(x^{s}_{i}\\) ,and (3) the distance (as a measure of “impedance”) between the two regions, \\(d^{rs}\\).\nOne straightforward function, taking inspiration from Newton’s observations on gravity, would involve the product of the two “masses” (\\(x^{r}_{i}\\) and \\(x^{s}_{i}\\) ) divided by the square of the distance. The relatively simplified form is given by:\n\\[ z^{rs}_{i} = \\frac{x^{r \\cdot}_{i}x^{\\cdot s}_{i}} {x^{\\cdot \\cdot}_{i}} Q^{rs}_{i}\\]\nwhere \\(x^{r \\cdot}_{i}\\) is the “supply pool” of good \\(i\\) in region \\(r\\), \\(x^{\\cdot s}_{i}\\) is the “demand pool” of good \\(i\\) in region \\(s\\), \\(x^{\\cdot \\cdot}_{i}\\) is the total production of commodity \\(i\\) in the system and \\(Q^{rs}_{i}\\) is a parameter to be estimated. Note that the denominator in this formulation is aspatial; that is, its magnitude is unrelated to any measure of “distance” between \\(r\\) and \\(s\\). Rather, it provides the flexibility necessary so that if, for good \\(i\\), the supply pool in \\(r\\), the demand pool in \\(s\\) and total output all increase by \\(p\\) percent, then \\(z^{rs}_{i}\\) increases by that same percent (assuming \\(Q^{rs}_{i} > 0\\)). An important feature of this kind of formulation is that cross-hauling is allowed; that is, good \\(i\\) can be shipped simultaneously from \\(r\\) to \\(s\\) and from \\(s\\) to \\(r\\).\nThe most optimistic scenario is that values of \\(x^{r \\cdot}_{i}\\), \\(x^{\\cdot s}_{i}\\), \\(x^{\\cdot \\cdot}_{i}\\), and \\(z^{rs}_{i}\\) are known from some base period or for some subset of transportation data. In that case, one can evaluate the parameter \\(Q^{rs}_{i}\\) from those data, as\n\\[Q^{rs}_{i} = \\frac{\\bar{z}^{rs}_{i} \\bar{x}^{\\cdot \\cdot}_{i}} {\\bar{x}^{r \\cdot}_{i}  \\bar{x}^{\\cdot s}_{i}}\\]\nwhere overbars indicate known values.\nTwo-Region Interregional Models\nOne important feature in a two-region interregional model is that one region’s (domestic) exports of a particular good are the other region’s (domestic) imports. Since,\n\\[\na^{rr}_{ij} = \\left\\{\n\\begin{align*}\n(LQ^{r}_{i})a^{n}_{ij} \\space\\space \\text{if} \\space\\space LQ^{r}_{i} < 1 \\\\\na^{n}_{ij} \\space\\space \\text{if} \\space\\space LQ^{r}_{i} \\geq 1\n\\end{align*}\n\\right\\}\n\\]\nthen, in a two-region interregional model (with regions \\(r\\) and \\(s\\)),\n\\[\na^{sr}_{ij} = \\left\\{\n\\begin{align*}\n(1 - LQ^{r}_{i})a^{n}_{ij} \\space\\space \\text{if} \\space\\space LQ^{r}_{i} < 1 \\\\\n0 \\space\\space \\text{if} \\space\\space LQ^{r}_{i} \\geq 1\n\\end{align*}\n\\right\\}\n\\]\nThe two-region logic may also be implemented across more than two regions. The idea is to use location quotients, a sequence of two-region models, and an RAS balancing approach.\n\n\nThe majority of this documents structure is a selective abbreviation of Miller and Blair’s superb and elucidative book Input-Output Analysis: Foundations and Extensions (2009).\nFor more on I-O foundations and fundamentals see:\nLeontief (1936)\nChrist (1955)\nLeontief (1970)\nLeontief (1986)\nEconomic and Division (2003)\nTen Raa (2006)\nHorowitz and Planting (2009)\nFor Regional I-O see:\nIsard (1960)\nLeontief and Strout (1963)\nRound (1983)\nBatten and Boyce (1987)\nHewings and Jensen (1987)\nPolenske (1995)\nBenat (1997)\nBrand (1998)\nLiu and Vilain (2004)\nPolenske and Hewings (2004)\nLindall, Olson, and Alward (2006)\nSargento (2009)\nFor I-O Gravity models and other extensions see:\nPolenski (1969)\nCurry (1972)\nAhmad (1991)\nAnderson and Van Wincoop (2003)\nTrinh and Phong (2013)\nFor rurality and other applied topics see:\nBeyers (2006)\nIsserman, Feser, and Warren (2007)\nFeser and Isserman (2009)\nLocke et al. (2009)\nHan and Goetz (2019)\nKhalaf, Michaud, and Jolley (2021)\n\n\nNAICS\nThe North American Industry Classification System (NAICS) is the standard used by Federal statistical agencies in classifying business establishments for the purpose of collecting, analyzing, and publishing statistical data related to the U.S. business economy. NAICS was developed under the auspices of the Office of Management and Budget (OMB), and adopted in 1997 to replace the Standard Industrial Classification (SIC) system.\nThe highest level of NAICS classification is called the sector. There are 20 broad NAICS sectors two-digit NAICS. The subsequent hierarchy of NAICS specifications include subsector (three-digit), industry group (four-digit), NAICS industry (five-digit), and U.S. industry (six-digit). Counts of unique NAICS specifications for CBP 2019 data include 20, 86, 288, 635, and 960 clusters respectively (President, Management, and Budget 2022).\nBEA\nBureau of Economic Analysis (BEA) methodologies broadly encompass National, International, Regional, and Industry. Of principal relevance to this project are the industry economic accounts. The industry economic accounts, presenting both an input-output framework and an annual output of each industry, provide a detailed view of the interrelationships between U.S. producers and users, and the contribution to production across industries. See here for more. Industry account data products include: GDP by Industry, Gross Output by Industry, Input-Output Accounts, Employment by Industry, and Integrated Industry-Level Production Account (KLEMS).\nAt the foundation of most BEA industry statistics are the input-output accounts, which are of principal relevance to this project. Also called I-O accounts, these detailed tables capture the flow of goods and services from one industry to another and to consumers. An important use of the I-O tables is in the estimation of the direct and indirect effects that changes in final uses will have on industry and commodity output, on employment, or on income (Horowitz and Planting 2009).\nThe input-output accounts contain many data files including: Supply Tables, Use Tables, and Import Matrices. Supply Tables show the value of goods and services available in the U.S. economy, whether produced by domestic industries or imported. Whereas, Use Tables show how the supply of goods and services is used: including purchases by U.S. industries, individuals, and government, and exports to foreign purchasers. In addition, supplemental estimate tables encompass Requirements Tables, Make-Use Tables, and Historical Make-Use Tables. Requirements Tables are a summary of the full supply chain, with both direct and indirect connections among industries. For example, a baker relies directly on a miller for flour and indirectly on a farmer who supplies the miller with wheat.\nEstimates in the Industry Economic Accounts are generally available at four levels of detail: sector (21 industry groups), summary (71 industry groups), underlying summary (138 industry groups), and detail (405 industry groups). However, in practice the available BEA industry codes are sector (SEC) with 15 \\(\\times\\) 15 commodities and industries, summary (SUM) with 71 \\(\\times\\) 71 commodities and industries, and detail (DET) with 401 \\(\\times\\) 405 commodities and industries. For most I-O type data products from BEA, estimates at the detail level are available only for available for year 2007 and 2012. Data products from at the sector and summary detail levels are available from 1997 to 2020.\nAnnual I‐O accounts, which are updated once a year, are available from 1997 to 2020 at the sector and summary levels. Benchmark I‐O accounts include more detail, but are prepared less frequently, roughly once every 5 years based on detailed data from the Economic Census conducted by the Census Bureau. The 2002 benchmark was released in October 2007 (Locke et al. 2009). Detail level estimates are only available for 2007 and 2012.\nBEA develops analytical tools derived from the I-O framework, too, including: Trade in Value Added (TiVA) Statistics — Trace global value chains through direct and indirect U.S. trade partners, improving understanding of the U.S. role in international trade. Computable General Equilibrium (CGE) Models — Used to anticipate the response of the economy to changes in policy, changes in technology, and other external shocks. Regional Impact Analysis Models (such as BEA’s Regional Input-Output Modeling System - RIMS II) — Used to show the local impact of a specific project or event like a strike or natural disaster. For example, state or local government planners could use these models to assess the economic impact of a new baseball stadium or the closing of a military base.\nBEA industry codes used in national IO tables are not bijective with NAICS codes. Though they are similar at many levels and groupings some codes are not applicable (government) or do not align at any higher detail specificity e.g., construction data published by BEA at the detail level do not align with 2012 NAICS industries.\n\n\nSummary of Input–Output Relationships\n\\[\\begin{equation}\n\\begin{matrix}\n&  \\text{Economic } (n \\times n) \\\\\n\\hline\n\\text{Transactions } & \\mathbf{Z} \\\\\n& \\mathbf{Zi} + \\mathbf{f} = \\mathbf{x} \\\\\n& \\\\\n\\text{Direct Requirements } & \\mathbf{A} = \\mathbf{Z\\hat{x}^{-1}} \\\\\n& \\mathbf{Ax} + \\mathbf{f} = \\mathbf{x} \\\\\n& \\\\\n\\text{Total Requirements } & \\mathbf{L} = (\\mathbf{I} - \\mathbf{A})^{-1} \\\\\n& \\mathbf{x} = \\mathbf{Lf} \\\\\n\\hline\n\\end{matrix}\n\\end{equation}\\]\nThe (industry-by-industry) Transactions matrix shows monetary transactions between pairs of sectors or interindustry sales (intermediate sales) by sector \\(i\\) to all sectors \\(j\\).\nThe (industry-by-industry) Direct Requirements (technical coefficients) matrix specifies the required amount of industry \\(i\\)’s commodity used to produce of one unit of industry \\(j\\)’s commodity.\nThe (industry-by-industry) Total Requirements matrix shows, on a per-dollar basis, the industry output the economy generates in order to provide an industry’s commodities to final users: \\(\\partial{x_{i}}/\\partial{f_{j}} = l_{ij}\\).\nTechnically speaking, the Direct Requirements matrix constructed from the BEA Total Requirements matrix (from a Make and Use table framework) is an industry based technology, industry-by-industry class table \\(\\underset{(i \\times i)}{\\mathbf{A}_{I}} = \\mathbf{V}(\\mathbf{\\widehat{V'i}})^{-1}\\mathbf{U}(\\mathbf{\\widehat{Vi}})^{-1}\\)\n\n\n\n\n\n\n\n\n\nReferences\n\nAhmad, Mushtaq. 1991. “On the Operationalisation of the Leontief-Strout Gravity Model.” Pakistan Economic and Social Review 29 (2): 113–36. http://www.jstor.org/stable/25825065.\n\n\nAnderson, James E., and Eric Van Wincoop. 2003. “Gravity with Gravitas: A Solution to the Border Puzzle.” American Economic Review 93 (1): 170–92. https://doi.org/10.1257/000282803321455214.\n\n\nBatten, David F., and David E. Boyce. 1987. “Spatial Interaction, Transportation, and Interregional Commodity Flow Models.” In Handbook of Regional and Urban Economics, edited by P. Nijkamp, 1:357–406. Elsevier.\n\n\nBenat, G Andrew. 1997. Regional Multipliers: A User Handbook for the Regional Input-Output Modeling Systems (RIMS II). Third. Vol. 59. US Government Printing Office. https://apps.bea.gov/scb/pdf/regional/perinc/meth/rims2.pdf.\n\n\nBeyers, William B. 2006. “Approaching Research Methods in Economic Geography.” In Economic Geography: Past, Present and Future, edited by S. Bagchi-Sen and H. Lawton-Smith, 208–18. Routledge. https://library.oapen.org/bitstream/handle/20.500.12657/24266/1005865.pdf#page=208.\n\n\nBrand, Steven James. 1998. “A Reassessment of the Hybrid Approach to the Construction of Regional Input-Output Tables.” PhD thesis, University of Plymouth. https://pearl.plymouth.ac.uk/bitstream/handle/10026.1/2155/STEVEN%20JAMES%20BRAND.PDF?sequence=1.\n\n\nChrist, Carl F. 1955. “A Review of Input-Output Analysis.” In Input-Output Analysis: An Appraisal, edited by Raymond W. Goldsmith, 137–82. Princeton University Press. https://www.nber.org/system/files/chapters/c2866/c2866.pdf.\n\n\nCurry, Leslie. 1972. “A Spatial Analysis of Gravity Flows.” Regional Studies 6 (2): 131–47. https://doi.org/10.1080/00343400701232140.\n\n\nEconomic, Department of, and Social Affairs Statistics Division. 2003. National Accounts: A Practical Introduction. Series f: Studies in Methods 85. New York: United Nations. https://unstats.un.org/unsd/publication/SeriesF/seriesF_85.pdf.\n\n\nFeser, Edward, and Andrew Isserman. 2009. “The Rural Role in National Value Chains.” Regional Studies 43 (1): 89–109.\n\n\nHan, Yicheol, and Stephan J. Goetz. 2019. “Predicting US County Economic Resilience from Industry Input-Output Accounts.” Applied Economics 51 (19): 2019–28. https://doi.org/10.1080/00036846.2018.1539806.\n\n\nHewings, Geoffrey J. D., and Rodney C. Jensen. 1987. “Regional, Interregional and Multiregional Input-Output Analysis.” In Handbook of Regional and Urban Economics, edited by P. Nijkamp, 1:295–355. Elsevier. http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.467.175&rep=rep1&type=pdf.\n\n\nHorowitz, Karen J, and Mark A Planting. 2009. “Concepts and Methods of the Input-Output Accounts.” BEA. https://www.bea.gov/sites/default/files/methodologies/IOmanual_092906.pdf.\n\n\nIsard, Walter. 1960. Methods of Interregional and Regional Analysis. Cambridge, Massachusetts: The MIT Press. http://www.economia.unam.mx/cedrus/descargas/Methodsofregionalanalysis.pdf.\n\n\nIsserman, Andrew M, Edward Feser, and Drake Warren. 2007. “Why Some Rural Communities Prosper While Others Do Not: A Report to USDA Rural Development.” University of Illinois. https://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.624.5616&rep=rep1&type=pdf.\n\n\nKhalaf, Christelle, Gilbert Michaud, and G. Jason Jolley. 2021. “Toward a New Rural Typology: Mapping Resources, Opportunities, and Challenges.” Economic Development Quarterly. https://doi.org/10.1177/08912424211069122.\n\n\nLeontief, Wassily W. 1936. “Quantitative Input and Output Relations in the Economic Systems of the United States.” The Review of Economics and Statistics 18 (3): 105–25. https://doi.org/10.2307/1927837.\n\n\n———. 1970. “Environmental Repercussions and the Economic Structure: An Input-Output Approach.” The Review of Economics and Statistics 52 (3): 262–71. http://www.jstor.org/stable/1926294.\n\n\n———. 1986. Input-Output Economics. Oxford University Press. https://archive.org/details/inputoutputecono0000leon.\n\n\nLeontief, Wassily W., and Alan Strout. 1963. “Multiregional Input-Output Analysis.” In Structural Interdependence and Economic Development, edited by T. Barna, 119–50. Springer.\n\n\nLindall, Scott A, Douglas C Olson, and Gregory S Alward. 2006. “Deriving Multi-Regional Models Using the IMPLAN National Trade Flows Model.” Journal of Regional Analysis and Policy 36 (1100-2016-89756). https://ageconsearch.umn.edu/record/132316/files/06-1-6.pdf.\n\n\nLiu, Louie Nan, and Pierre Vilain. 2004. “Estimating Commodity Inflows to a Substate Region Using Input-Output Data: Commodity Flow Survey Accuracy Tests.” Journal of Transportation and Statistics 7 (1): 23–37. https://www.bts.gov/sites/bts.dot.gov/files/legacy/publications/journal_of_transportation_and_statistics/volume_07_number_01/pdf/entire.pdf.\n\n\nLocke, Gary, Rebecca M Blank, J Steven Landefeld, and Rosemary D Marcuss. 2009. “Measuring the Nation’s Economy: An Industry Perspective.” US Department of Commerce Working Paper. Washington, DC. https://www.bea.gov/sites/default/files/methodologies/industry_primer.pdf.\n\n\nMiller, Ronald E., and Peter D Blair. 2009. Input-Output Analysis: Foundations and Extensions. Second. Cambridge University Press.\n\n\nPolenske, Karen R. 1995. “Leontief’s Spatial Economic Analyses.” Structural Change and Economic Dynamics 6 (3): 309–18. https://doi.org/https://doi.org/10.1016/0954-349X(95)00020-N.\n\n\nPolenske, Karen R., and Geoffrey J. D. Hewings. 2004. “Trade and Spatial Economic Interdependence.” Papers in Regional Science 83 (1): 269–89. https://doi.org/10.1007/s10110-003-0186-7.\n\n\nPolenski, Karen. 1969. “Empirical Implementation of a Multiregional Input-Output Gravity Trade Model.” In Contributions to Input-Output Analysis, edited by A. P. Carter and A. Brody. North-Holland Publishing Company. https://researchrepository.wvu.edu/cgi/viewcontent.cgi?article=1053&context=rri_ioapplication.\n\n\nPresident, Executive Office of the, Office of Management, and Budget. 2022. North American Industry Classification System, 2022. https://www.census.gov/naics/reference_files_tools/2022_NAICS_Manual.pdf.\n\n\nRound, Jeffery I. 1983. “Nonsurvey Techniques: A Critical Review of the Theory and the Evidence.” International Regional Science Review 8 (3): 189–212. https://doi.org/10.1177/016001768300800302.\n\n\nSargento, Ana L. M. 2009. “Introducing Input-Output Analysis at the Regional Level: Basic Notions and Specific Issues.” The Regional Economics Application Laboratory (REAL). https://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.628.8140&rep=rep1&type=pdf.\n\n\nTen Raa, Thijs. 2006. The Economics of Input-Output Analysis. Cambridge University Press. https://www.researchgate.net/profile/Thijs-Ten-Raa-2/publication/227390254_The_Economics_of_Input-Output_Analysis/links/00b49538e2ae63d1e0000000/The-Economics-of-Input-Output-Analysis.pdf.\n\n\nTrinh, Bui, and Nguyen Viet Phong. 2013. “A Short Note on RAS Method.” Advances in Management and Applied Economics 3 (4): 133–37. https://www.scienpress.com/Upload/AMAE/Vol%203_4_12.pdf."
  }
]